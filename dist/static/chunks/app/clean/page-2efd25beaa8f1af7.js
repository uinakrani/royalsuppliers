(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[968],{45367:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(62898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},89445:function(e,t,r){Promise.resolve().then(r.bind(r,22991))},22991:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return CleanPage}});var a=r(57437),s=r(45050),n=r(24086);let clearFinancials=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearOrders:!1,clearInvestment:!0,clearLedger:!0,clearActivityLogs:!0,clearPartyPayments:!0,clearOrderPayments:!0},t=(0,s.z)();if(!t){console.error("Firebase not initialized");return}let r=(0,n.qs)(t),a=0,commitBatch=async()=>{a>0&&(await r.commit(),console.log("Committed batch of ".concat(a," operations")),a=0)};if(e.clearLedger){console.log("Clearing ledger entries...");let e=await (0,n.PL)((0,n.hJ)(t,"ledgerEntries"));e.forEach(e=>{r.delete(e.ref),a++})}if(e.clearPartyPayments){console.log("Clearing party payments...");let e=await (0,n.PL)((0,n.hJ)(t,"partyPayments"));e.forEach(e=>{r.delete(e.ref),a++})}if(e.clearActivityLogs){console.log("Clearing ledger activities...");let e=await (0,n.PL)((0,n.hJ)(t,"ledgerActivities"));e.forEach(e=>{r.delete(e.ref),a++}),console.log("Clearing investment activities...");let s=await (0,n.PL)((0,n.hJ)(t,"investmentActivity"));s.forEach(e=>{r.delete(e.ref),a++})}if(e.clearInvestment){console.log("Clearing investment...");let e=await (0,n.PL)((0,n.hJ)(t,"investment"));e.forEach(e=>{r.delete(e.ref),a++})}if(a>=450&&await commitBatch(),e.clearOrders){console.log("Deleting all orders...");let e=await (0,n.PL)((0,n.hJ)(t,"orders"));e.forEach(e=>{r.delete(e.ref),a++})}else if(e.clearOrderPayments){console.log("Clearing order payments...");let e=await (0,n.PL)((0,n.hJ)(t,"orders"));for(let s of e.docs){let e=(0,n.JU)(t,"orders",s.id),i=s.data();(i.partialPayments&&i.partialPayments.length>0||i.customerPayments&&i.customerPayments.length>0||i.adjustmentAmount)&&(r.update(e,{partialPayments:[],customerPayments:[],adjustmentAmount:0}),a++),a>=450&&await commitBatch()}}await commitBatch(),console.log("Selected financial data cleared successfully.")};var i=r(2265),l=r(68286),c=r(61444),o=r(72894),d=r(62898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,d.Z)("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),h=(0,d.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var p=r(45367);function CleanPage(){let[e,t]=(0,i.useState)("Idle"),[r,s]=(0,i.useState)({clearOrders:!1,clearInvestment:!1,clearLedger:!1,clearActivityLogs:!1,clearPartyPayments:!1,clearOrderPayments:!1}),toggleOption=e=>{s(t=>({...t,[e]:!t[e]}))},handleClean=async()=>{if(!Object.values(r).some(e=>e)){l.h.error("No Selection","Please select at least one data type to clear.");return}let e=await l.h.confirm({title:"Clear Selected Data?",message:"This action is irreversible. Are you sure you want to proceed with deleting the selected data?",icon:"warning",confirmText:"Yes, Delete Selected",cancelText:"Cancel"});if(e){t("Cleaning...");try{await clearFinancials(r),t("Done! Cleanup complete."),l.h.success("Success","Selected data has been cleared."),s({clearOrders:!1,clearInvestment:!1,clearLedger:!1,clearActivityLogs:!1,clearPartyPayments:!1,clearOrderPayments:!1})}catch(e){console.error(e),t("Error: "+e),l.h.error("Error","Failed to clear data.")}}};return(0,a.jsxs)("div",{className:"bg-gray-50 min-h-screen flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 pb-24",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Data Management"}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-100 bg-red-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-700 mb-1",children:[(0,a.jsx)(o.Z,{size:20}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Danger Zone"})]}),(0,a.jsx)("p",{className:"text-xs text-red-600",children:"Select the data you want to permanently delete from the database."})]}),(0,a.jsxs)("div",{className:"divide-y divide-gray-100",children:[(0,a.jsxs)("label",{className:"flex items-center p-4 hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mr-3 text-primary-600",children:r.clearOrders?(0,a.jsx)(m,{size:24}):(0,a.jsx)(h,{size:24})}),(0,a.jsx)("input",{type:"checkbox",className:"hidden",checked:!!r.clearOrders,onChange:()=>toggleOption("clearOrders")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:"Orders"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Delete all order records permanently"})]})]}),(0,a.jsxs)("label",{className:"flex items-center p-4 hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mr-3 text-primary-600",children:r.clearOrderPayments?(0,a.jsx)(m,{size:24}):(0,a.jsx)(h,{size:24})}),(0,a.jsx)("input",{type:"checkbox",className:"hidden",checked:!!r.clearOrderPayments,onChange:()=>toggleOption("clearOrderPayments")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:"Order Payments"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Clear partial & customer payments inside orders (keeps orders)"})]})]}),(0,a.jsxs)("label",{className:"flex items-center p-4 hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mr-3 text-primary-600",children:r.clearLedger?(0,a.jsx)(m,{size:24}):(0,a.jsx)(h,{size:24})}),(0,a.jsx)("input",{type:"checkbox",className:"hidden",checked:!!r.clearLedger,onChange:()=>toggleOption("clearLedger")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:"Ledger & Timeline"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Delete all ledger entries (Income/Expense)"})]})]}),(0,a.jsxs)("label",{className:"flex items-center p-4 hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mr-3 text-primary-600",children:r.clearPartyPayments?(0,a.jsx)(m,{size:24}):(0,a.jsx)(h,{size:24})}),(0,a.jsx)("input",{type:"checkbox",className:"hidden",checked:!!r.clearPartyPayments,onChange:()=>toggleOption("clearPartyPayments")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:"Party Payments"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Delete standalone party payment records"})]})]}),(0,a.jsxs)("label",{className:"flex items-center p-4 hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mr-3 text-primary-600",children:r.clearInvestment?(0,a.jsx)(m,{size:24}):(0,a.jsx)(h,{size:24})}),(0,a.jsx)("input",{type:"checkbox",className:"hidden",checked:!!r.clearInvestment,onChange:()=>toggleOption("clearInvestment")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:"Investment"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Reset investment capital data"})]})]}),(0,a.jsxs)("label",{className:"flex items-center p-4 hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mr-3 text-primary-600",children:r.clearActivityLogs?(0,a.jsx)(m,{size:24}):(0,a.jsx)(h,{size:24})}),(0,a.jsx)("input",{type:"checkbox",className:"hidden",checked:!!r.clearActivityLogs,onChange:()=>toggleOption("clearActivityLogs")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:"Activity Logs"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Clear history of changes (Ledger/Investment logs)"})]})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 border-t border-gray-100",children:[(0,a.jsxs)("button",{onClick:handleClean,className:"w-full bg-red-600 text-white px-4 py-3 rounded-lg hover:bg-red-700 font-medium active:bg-red-800 transition-colors flex items-center justify-center gap-2 shadow-sm",children:[(0,a.jsx)(p.Z,{size:18}),"Delete Selected Data"]}),(0,a.jsxs)("p",{className:"mt-3 text-xs text-center text-gray-500 font-mono",children:["Status: ",e]})]})]})]}),(0,a.jsx)(c.Z,{})]})}},61444:function(e,t,r){"use strict";r.d(t,{Z:function(){return NavBar}});var a=r(57437),s=r(61396),n=r.n(s),i=r(24033),l=r(77480),c=r(4322),o=r(34822),d=r(76637),m=r(30182);function NavBar(){let e=(0,i.usePathname)(),t=[{href:"/",icon:l.Z,label:"Dashboard"},{href:"/orders",icon:c.Z,label:"Orders"},{href:"/ledger",icon:o.Z,label:"Ledger"},{href:"/invoices",icon:d.Z,label:"Invoices"}];return(0,a.jsx)("nav",{className:"fixed left-0 right-0 z-50 flex items-end justify-center",style:{bottom:"0.75rem",paddingLeft:"max(env(safe-area-inset-left, 0px), 0.75rem)",paddingRight:"max(env(safe-area-inset-right, 0px), 0.75rem)",pointerEvents:"none"},children:(0,a.jsx)("div",{className:"bg-white/95 backdrop-blur-xl border border-gray-200/60 flex justify-around items-center",style:{width:"calc(100% - 1.5rem)",height:"4rem",minHeight:"4rem",borderRadius:"1.5rem",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08), 0 2px 8px rgba(0, 0, 0, 0.04), 0 0 0 1px rgba(0, 0, 0, 0.02)",pointerEvents:"auto"},children:t.map(t=>{let r=t.icon,s=e===t.href;return(0,a.jsxs)(n(),{href:t.href,className:"flex flex-col items-center justify-center flex-1 h-full relative touch-manipulation",style:{WebkitTapHighlightColor:"transparent",position:"relative",overflow:"hidden",minHeight:"4rem",padding:"0.5rem 0.25rem",cursor:"pointer",transition:"transform 0.15s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseDown:e=>{e.currentTarget.style.transform="scale(0.95)",(0,m.m)(e)},onMouseUp:e=>{e.currentTarget.style.transform="scale(1)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)"},onTouchStart:e=>{e.currentTarget.style.transform="scale(0.95)",(0,m.m)(e)},onTouchEnd:e=>{e.currentTarget.style.transform="scale(1)"},onClick:e=>{(0,m.m)(e)},children:[(0,a.jsx)("div",{className:"flex items-center justify-center rounded-full transition-all duration-200 ease-out",style:{width:"40px",height:"40px",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},children:(0,a.jsx)(r,{size:22,className:"transition-all duration-200 ".concat(s?"text-primary-600":"text-gray-500"),strokeWidth:s?2.5:2})}),(0,a.jsx)("span",{className:"text-[10px] mt-1 font-medium transition-all duration-200 ".concat(s?"text-primary-600":"text-gray-500"),style:{lineHeight:"1.2",marginTop:"0.25rem"},children:t.label}),s&&(0,a.jsx)("div",{className:"absolute bottom-0.5 left-1/2 transform -translate-x-1/2 w-10 h-0.5 bg-primary-600 rounded-full"})]},t.href)})})})}},45050:function(e,t,r){"use strict";let a,s;r.d(t,{z:function(){return getDb}});var n=r(20994),i=r(24086),l=r(62601);function initializeFirebase(){if(s)return s;let e=function(){let e=l.env.NEXT_PUBLIC_ENVIRONMENT||"production";return"development"===e?{apiKey:"AIzaSyBtdktQETLP05zYNcPc7GKua21dgEgBjaI",authDomain:"orders-38fca-8461e.firebaseapp.com",projectId:"orders-38fca",storageBucket:"orders-38fca.firebasestorage.app",messagingSenderId:"38529807574",appId:"1:38529807574:web:82386c4656d1e75b828577",environment:"development"}:{apiKey:"AIzaSyBtdktQETLP05zYNcPc7GKua21dgEgBjaI",authDomain:"orders-38fca.firebaseapp.com",projectId:"orders-38fca",storageBucket:"orders-38fca.firebasestorage.app",messagingSenderId:"38529807574",appId:"1:38529807574:web:041ccaa44087a14d828577",environment:"production"}}(),t=e.apiKey&&e.projectId&&e.appId;if(!t){console.error("Firebase is not configured. Please create a .env.local file with your Firebase credentials."),console.error("Missing configuration:",{environment:e.environment||"production",apiKey:!e.apiKey,projectId:!e.projectId,appId:!e.appId,allConfig:{hasApiKey:!!e.apiKey,hasProjectId:!!e.projectId,hasAppId:!!e.appId}});return}try{let t=e.environment||"production",l=(0,n.C6)();if(0===l.length){var r;a=(0,n.ZF)(e),console.log("Firebase initialized successfully",{environment:t,projectId:e.projectId,apiKey:(null===(r=e.apiKey)||void 0===r?void 0:r.substring(0,10))+"..."})}else a=l[0],console.log("Using existing Firebase app",{environment:t,projectId:e.projectId});return s=(0,i.ad)(a),console.log("Firestore database initialized",{environment:t,db:!!s}),s}catch(e){console.error("Error initializing Firebase:",e),console.error("Error details:",{message:null==e?void 0:e.message,code:null==e?void 0:e.code,stack:null==e?void 0:e.stack}),s=void 0;return}}function getDb(){return s||(s=initializeFirebase()),s}s=initializeFirebase()},30182:function(e,t,r){"use strict";r.d(t,{m:function(){return createRipple}});let createRipple=e=>{let t=e.currentTarget,r=t.getBoundingClientRect(),a=Math.max(r.width,r.height),s=e.clientX-r.left-a/2,n=e.clientY-r.top-a/2,i=document.createElement("span");i.style.cssText="\n    position: absolute;\n    width: ".concat(a,"px;\n    height: ").concat(a,"px;\n    left: ").concat(s,"px;\n    top: ").concat(n,"px;\n    border-radius: 50%;\n    background: rgba(46, 49, 251, 0.3);\n    transform: scale(0);\n    animation: ripple 0.6s cubic-bezier(0.4, 0, 0.2, 1);\n    pointer-events: none;\n    z-index: 1;\n  "),t.style.position="relative",t.style.overflow="hidden",t.appendChild(i),setTimeout(()=>{i.remove()},600)}},68286:function(e,t,r){"use strict";r.d(t,{h:function(){return a.nativePopup}});var a=r(88923)}},function(e){e.O(0,[358,118,923,971,472,744],function(){return e(e.s=89445)}),_N_E=e.O()}]);