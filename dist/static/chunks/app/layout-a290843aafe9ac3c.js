(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{62898:function(e,t,r){"use strict";r.d(t,{Z:function(){return createLucideIcon}});var s=r(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(e,t)=>{let r=(0,s.forwardRef)(({color:r="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:i="",children:c,...u},d)=>(0,s.createElement)("svg",{ref:d,...n,width:l,height:l,stroke:r,strokeWidth:a?24*Number(o)/Number(l):o,className:["lucide",`lucide-${toKebabCase(e)}`,i].join(" "),...u},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r}},11981:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(62898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},72894:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(62898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},13008:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(62898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},74056:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(62898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},82549:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(62898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},13329:function(e,t,r){Promise.resolve().then(r.t.bind(r,72853,23)),Promise.resolve().then(r.bind(r,29628)),Promise.resolve().then(r.bind(r,19148)),Promise.resolve().then(r.bind(r,53465)),Promise.resolve().then(r.bind(r,14170)),Promise.resolve().then(r.bind(r,88923)),Promise.resolve().then(r.bind(r,43220)),Promise.resolve().then(r.bind(r,19958)),Promise.resolve().then(r.bind(r,86345)),Promise.resolve().then(r.bind(r,78439)),Promise.resolve().then(r.t.bind(r,22193,23))},29628:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return AndroidFullscreen}});var s=r(2265);let isAndroid=()=>/Android/i.test(navigator.userAgent),isIOS=()=>/iPhone|iPad|iPod/i.test(navigator.userAgent),isStandalone=()=>window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches||!0===window.navigator.standalone||document.referrer.includes("android-app://");function AndroidFullscreen(){return(0,s.useEffect)(()=>{if(isIOS()||!isAndroid())return;document.body.classList.add("android-device");let requestFullscreen=async()=>{try{let e=document.documentElement,t=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement);if(t)return;e.requestFullscreen?await e.requestFullscreen():e.webkitRequestFullscreen?await e.webkitRequestFullscreen():e.mozRequestFullScreen?await e.mozRequestFullScreen():e.msRequestFullscreen&&await e.msRequestFullscreen()}catch(e){"NotAllowedError"!==e.name&&console.log("Fullscreen request:",e.message||"Not available")}},handleUserInteraction=()=>{requestFullscreen()},e=["click","touchstart","touchend","mousedown"];e.forEach(e=>{document.addEventListener(e,handleUserInteraction,{once:!0,passive:!0})}),isStandalone()&&setTimeout(()=>{requestFullscreen()},100);let t=setTimeout(()=>{requestFullscreen()},1e3),r=setTimeout(()=>{requestFullscreen()},3e3);return()=>{clearTimeout(t),clearTimeout(r),e.forEach(e=>{document.removeEventListener(e,handleUserInteraction)})}},[]),null}},19148:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return AutoBackupScheduler}});var s=r(2265);function AutoBackupScheduler(){let e=(0,s.useRef)(!1),triggerBackup=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"on app open";try{console.log("\uD83D\uDD04 Triggering automatic backup (".concat(e,")..."));let t=await fetch("/api/backup",{method:"POST",headers:{"Content-Type":"application/json"}}),r=await t.json();r.success?console.log("✅ Automatic backup completed:",r.backupId||r.fileName):console.error("❌ Automatic backup failed:",r.error)}catch(e){console.error("❌ Error triggering backup:",e)}},checkBackupStatus=async()=>{try{let e=await fetch("/api/backup/status"),t=await e.json();if(t.success){if(t.needsBackup){let e=t.hoursSinceLastBackup||"unknown";console.log("⏰ Backup needed! Last backup was ".concat(e," hours ago.")),await triggerBackup("more than 12 hours since last backup")}else if(t.lastBackupTime){let e=t.hoursSinceLastBackup||0;console.log("✅ Backup is up to date (".concat(e," hours ago)"))}else console.log("ℹ️  No previous backup found, creating first backup..."),await triggerBackup("first backup")}}catch(e){console.error("❌ Error checking backup status:",e)}};return(0,s.useEffect)(()=>{e.current||(e.current=!0,console.log("\uD83D\uDD0D Checking backup status on app open..."),checkBackupStatus())},[]),null}},53465:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return FirebaseSetupAlert}});var s=r(57437),n=r(2265),l=r(11981);function FirebaseSetupAlert(){let[e,t]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{},[]),e)?(0,s.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 m-4 rounded",children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)(l.Z,{className:"h-5 w-5 text-yellow-400 mr-2 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Firebase Not Configured"}),(0,s.jsxs)("p",{className:"text-sm text-yellow-700 mb-2",children:["To save orders, you need to set up Firebase. Create a ",(0,s.jsx)("code",{className:"bg-yellow-100 px-1 rounded",children:".env.local"})," file in the project root with your Firebase credentials."]}),(0,s.jsxs)("p",{className:"text-xs text-yellow-600",children:["See ",(0,s.jsx)("code",{className:"bg-yellow-100 px-1 rounded",children:"QUICKSTART.md"})," for setup instructions."]})]}),(0,s.jsx)("button",{onClick:()=>t(!1),className:"ml-2 text-yellow-600 hover:text-yellow-800",children:"\xd7"})]})}):null}},14170:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return FirestoreRulesAlert}});var s=r(57437),n=r(2265),l=r(72894),o=r(82549),a=r(62898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a.Z)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);function FirestoreRulesAlert(){let[e,t]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{let handleShowAlert=()=>{t(!0)};return window.addEventListener("show-firestore-rules-alert",handleShowAlert),()=>{window.removeEventListener("show-firestore-rules-alert",handleShowAlert)}},[]),e)?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[10000] flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-xl",children:[(0,s.jsxs)("div",{className:"flex items-start mb-4",children:[(0,s.jsx)(l.Z,{className:"text-red-600 mr-3 flex-shrink-0 mt-1",size:24}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Firestore Security Rules Issue"}),(0,s.jsx)("p",{className:"text-sm text-gray-700 mb-4",children:"Your orders are timing out because Firestore security rules are blocking writes."})]}),(0,s.jsx)("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600 ml-2",children:(0,s.jsx)(o.Z,{size:20})})]}),(0,s.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-yellow-900 mb-2",children:"Quick Fix:"}),(0,s.jsxs)("ol",{className:"list-decimal list-inside text-sm text-yellow-800 space-y-1",children:[(0,s.jsxs)("li",{children:["Go to ",(0,s.jsx)("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:"Firebase Console"})]}),(0,s.jsxs)("li",{children:["Select project: ",(0,s.jsx)("code",{className:"bg-yellow-100 px-1 rounded",children:"orders-38fca"})]}),(0,s.jsxs)("li",{children:["Click ",(0,s.jsx)("strong",{children:"Firestore Database"})," → ",(0,s.jsx)("strong",{children:"Rules"})]}),(0,s.jsx)("li",{children:"Paste this code:"})]}),(0,s.jsx)("pre",{className:"mt-2 p-2 bg-yellow-100 rounded text-xs overflow-x-auto",children:"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    match /orders/{document=**} {\n      allow read, write: if true;\n    }\n  }\n}"}),(0,s.jsxs)("p",{className:"text-xs text-yellow-700 mt-2",children:[(0,s.jsx)("strong",{children:"5."})," Click ",(0,s.jsx)("strong",{children:'"Publish"'})," and wait for confirmation"]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("a",{href:"https://console.firebase.google.com/project/orders-38fca/firestore/rules",target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-lg font-medium text-center flex items-center justify-center gap-2 hover:bg-primary-700",children:[(0,s.jsx)(i,{size:16}),"Open Firebase Console"]}),(0,s.jsx)("button",{onClick:()=>t(!1),className:"flex-1 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-300",children:"I'll Fix It Later"})]})]})}):null}},43220:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return PWAInstallPrompt}});var s=r(2265),n=r(88923);let isAndroid=()=>/Android/i.test(navigator.userAgent),isChrome=()=>/Chrome/i.test(navigator.userAgent)&&!/Edg|OPR|SamsungBrowser/i.test(navigator.userAgent),isIOS=()=>/iPhone|iPad|iPod/i.test(navigator.userAgent);function PWAInstallPrompt(){let[e,t]=(0,s.useState)(null),[r,l]=(0,s.useState)(!1),[o,a]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(isIOS())return;if(window.matchMedia("(display-mode: standalone)").matches){l(!0),isAndroid()&&requestFullscreenForAndroid();return}let e=localStorage.getItem("pwa-install-dismissed");if("true"===e||!isAndroid()||!isChrome())return;let handleBeforeInstallPrompt=e=>{e.preventDefault(),t(e),setTimeout(()=>{o||r||(a(!0),showInstallPrompt(e))},5e3)},handleAppInstalled=()=>{l(!0),t(null),a(!1),localStorage.setItem("pwa-installed","true"),localStorage.removeItem("pwa-install-dismissed"),isAndroid()&&setTimeout(()=>{requestFullscreenForAndroid()},1e3),n.nativePopup.success("App Installed!","Royal Suppliers has been installed successfully. You can now access it from your home screen.")};return window.addEventListener("beforeinstallprompt",handleBeforeInstallPrompt),window.addEventListener("appinstalled",handleAppInstalled),()=>{window.removeEventListener("beforeinstallprompt",handleBeforeInstallPrompt),window.removeEventListener("appinstalled",handleAppInstalled)}},[o,r]);let showInstallPrompt=async e=>{if(e)try{let r=await n.nativePopup.confirm({title:"Install Royal Suppliers",message:'Install our app for a better experience:\n\n⚡ Faster loading\n\uD83D\uDCF1 Works offline\n\uD83D\uDD14 Better performance\n\uD83D\uDCF2 Easy access from home screen\n\nTap "Install" to add to your home screen.',confirmText:"Install",cancelText:"Not Now"});if(r){await e.prompt();let{outcome:r}=await e.userChoice;"accepted"===r?n.nativePopup.success("Installing...","Please follow the on-screen instructions to complete installation."):localStorage.setItem("pwa-install-dismissed","true"),t(null),a(!0)}else localStorage.setItem("pwa-install-dismissed","true"),a(!0)}catch(e){console.error("Error showing install prompt:",e)}},requestFullscreenForAndroid=async()=>{if(isAndroid())try{let e=document.documentElement;e.requestFullscreen?await e.requestFullscreen():e.webkitRequestFullscreen?await e.webkitRequestFullscreen():e.mozRequestFullScreen?await e.mozRequestFullScreen():e.msRequestFullscreen&&await e.msRequestFullscreen()}catch(e){console.log("Fullscreen request:",e.message||"Not available")}};return(0,s.useEffect)(()=>{window.triggerPWAInstall=()=>{e?showInstallPrompt(e):n.nativePopup.info("Install App",'To install the app, use the menu (three dots) in Chrome and select "Add to Home screen" or "Install app".')}},[e]),null}},19958:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return PWARegister}});var s=r(2265);function PWARegister(){return(0,s.useEffect)(()=>{if("serviceWorker"in navigator){navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()});let checkForUpdates=async()=>{try{let e=await navigator.serviceWorker.ready;await e.update()}catch(e){console.error("Service Worker update check failed:",e)}},e=setInterval(checkForUpdates,3e5);return setTimeout(checkForUpdates,3e4),()=>{clearInterval(e)}}},[]),null}},86345:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ToastContainer},showToast:function(){return showToast}});var s=r(88923);function ToastContainer(){return null}function showToast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";s.nativePopup[t]("success"===t?"Success":"error"===t?"Error":"Info",e).catch(()=>{})}},78439:function(e,t,r){"use strict";r.r(t),r.d(t,{PopupStackProvider:function(){return PopupStackProvider},usePopupStack:function(){return usePopupStack}});var s=r(57437),n=r(2265);let l=(0,n.createContext)(void 0);function PopupStackProvider(e){let{children:t}=e,[r,o]=(0,n.useState)([]),a=(0,n.useCallback)(e=>(o(t=>t.includes(e)?t:[...t,e]),99999+r.length),[r.length]),i=(0,n.useCallback)(e=>{o(t=>t.filter(t=>t!==e))},[]),c=(0,n.useCallback)(()=>r.length,[r.length]),u=(0,n.useCallback)(e=>r.length>0&&r[r.length-1]===e,[r]);return(0,s.jsx)(l.Provider,{value:{registerPopup:a,unregisterPopup:i,getPopupCount:c,isTopPopup:u},children:t})}function usePopupStack(){let e=(0,n.useContext)(l);return void 0===e?{registerPopup:()=>99999,unregisterPopup:()=>{},getPopupCount:()=>0,isTopPopup:()=>!0}:e}},72853:function(){},22193:function(e){e.exports={style:{fontFamily:"'__Inter_b9c7ce', '__Inter_Fallback_b9c7ce'",fontStyle:"normal"},className:"__className_b9c7ce"}},30622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=r(2265),n=Symbol.for("react.element"),l=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var s,l={},c=null,u=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,s)&&!i.hasOwnProperty(s)&&(l[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===l[s]&&(l[s]=t[s]);return{$$typeof:n,type:e,key:c,ref:u,props:l,_owner:a.current}}t.Fragment=l,t.jsx=q,t.jsxs=q},57437:function(e,t,r){"use strict";e.exports=r(30622)}},function(e){e.O(0,[466,923,971,472,744],function(){return e(e.s=13329)}),_N_E=e.O()}]);