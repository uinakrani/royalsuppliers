"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[587,267],{39414:function(e,t,r){r.d(t,{Z:function(){return DatePicker}});var a=r(57437),i=r(2265),n=r(82549),l=r(81291),o=r(17158),s=r(28203),d=r(28521),c=r(6308),h=r(96918),g=r(42232),m=r(37339),u=r(72339),x=r(69433),y=r(98124),b=r(98802);let formatLocalDate=e=>{let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(r,"-").concat(a)},parseLocalDate=e=>{let[t,r,a]=e.split("-").map(Number);return new Date(t,r-1,a)};function DatePicker(e){let{value:t,onChange:r,onClose:p,label:f="Select Date",inline:v=!1}=e,w=t?parseLocalDate(t):new Date,[j,N]=(0,i.useState)(w),k=(0,c.Z)(j),C=(0,h.Z)(j),I=(0,g.Z)({start:k,end:C}),S=(0,b.Z)(k),T=Array(S).fill(null),D=[...T,...I],handleDateSelect=e=>{r(formatLocalDate(e)),p()},handlePrevMonth=()=>{N((0,y.Z)(j,1))},handleNextMonth=()=>{N((0,x.Z)(j,1))},handleToday=()=>{let e=new Date;r(formatLocalDate(e)),p()},W=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],renderContent=()=>(0,a.jsxs)("div",{className:v?"w-full":"bg-white rounded-t-3xl w-full max-w-md animate-slide-up shadow-2xl",onClick:e=>e.stopPropagation(),style:{WebkitTapHighlightColor:"transparent"},children:[!v&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:f}),(0,a.jsx)("button",{onClick:p,className:"p-1.5 active:bg-gray-100 rounded-lg",style:{WebkitTapHighlightColor:"transparent"},children:(0,a.jsx)(n.Z,{size:18,className:"text-gray-500"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between ".concat(v?"p-2":"p-3"," ").concat(v?"":"border-b border-gray-200"),children:[(0,a.jsx)("button",{onClick:handlePrevMonth,className:"p-1.5 active:bg-gray-100 rounded-lg",style:{WebkitTapHighlightColor:"transparent"},children:(0,a.jsx)(l.Z,{size:18,className:"text-gray-600"})}),(0,a.jsx)("div",{className:"text-base font-semibold text-gray-900",children:(0,d.ZP)(j,"MMMM yyyy")}),(0,a.jsx)("button",{onClick:handleNextMonth,className:"p-1.5 active:bg-gray-100 rounded-lg",style:{WebkitTapHighlightColor:"transparent"},children:(0,a.jsx)(o.Z,{size:18,className:"text-gray-600"})})]}),(0,a.jsxs)("div",{className:v?"p-2":"p-3",children:[(0,a.jsx)("div",{className:"grid grid-cols-7 ".concat(v?"gap-0.5 mb-1":"gap-1 mb-1.5"),children:W.map(e=>(0,a.jsx)("div",{className:"text-center ".concat(v?"text-[10px] py-1":"text-xs py-1.5"," font-medium text-gray-500"),children:e},e))}),(0,a.jsx)("div",{className:"grid grid-cols-7 ".concat(v?"gap-0.5":"gap-1"),children:D.map((e,r)=>{if(!e)return(0,a.jsx)("div",{className:"aspect-square"},"empty-".concat(r));let i=t&&(0,u.Z)(e,w),n=(0,u.Z)(e,new Date),l=(0,m.Z)(e,j);return(0,a.jsx)("button",{onClick:()=>handleDateSelect(e),className:"aspect-square ".concat(v?"rounded-md text-[11px]":"rounded-lg text-xs"," font-medium transition-all duration-100 ").concat(i?"bg-primary-600 text-white shadow-lg scale-110":n?"bg-primary-100 text-primary-700 border-2 border-primary-500 active:scale-[0.95]":l?"bg-white text-gray-900 active:bg-gray-100 active:scale-[0.95]":"bg-gray-50 text-gray-400"),style:{WebkitTapHighlightColor:"transparent"},children:(0,d.ZP)(e,"d")},e.toISOString())})})]}),(0,a.jsx)("div",{className:v?"p-2 border-t border-gray-200":"p-3 border-t border-gray-200",children:(0,a.jsxs)("button",{onClick:handleToday,className:v?"w-full h-9 bg-primary-600 text-white rounded-lg font-semibold active:bg-primary-700 active:scale-[0.97] transition-transform duration-100 flex items-center justify-center gap-2 shadow-lg shadow-primary-600/30 text-xs":"w-full h-10 bg-primary-600 text-white rounded-lg font-semibold active:bg-primary-700 active:scale-[0.97] transition-transform duration-100 flex items-center justify-center gap-2 shadow-lg shadow-primary-600/30 text-sm",style:{WebkitTapHighlightColor:"transparent"},children:[(0,a.jsx)(s.Z,{size:v?14:16}),"Select Today"]})})]});return v?renderContent():(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-[100000] flex items-end justify-center backdrop-blur-sm",onClick:e=>{e.target===e.currentTarget&&p()},children:renderContent()})}},56023:function(e,t,r){r.d(t,{Z:function(){return NumberPad}});var a=r(57437),i=r(2265),n=r(82549),l=r(15432),o=r(72965),s=r(74931);function NumberPad(e){let{value:t,onChange:r,onClose:d,label:c="Enter Amount",maxDecimals:h=2,allowNegative:g=!1,inline:m=!1,hideDoneButton:u=!1,showCurrency:x=!1}=e,getInitialValue=()=>{if(0===t||"0"===t||""===t||!t)return"0";let e=t.toString();return e.includes(".")?e.replace(/\.?0+$/,"")||"0":e},[y,b]=(0,i.useState)(getInitialValue()),[p,f]=(0,i.useState)(getInitialValue().includes("."));(0,i.useEffect)(()=>{let e=(()=>{if(0===t||"0"===t||""===t||!t)return"0";let e=t.toString();return e.includes(".")?e.replace(/\.?0+$/,"")||"0":e})();b(e),f(e.includes("."))},[t]);let handleNumberPress=e=>{let t=y;if("."===e){if(p)return;t="0"===y?"0.":y+".",f(!0)}else if(t="0"===y&&"."!==e?e:y+e,p){let e=t.split(".");if(e[1]&&e[1].length>h)return}b(t);let a=parseFloat(t)||0;r(a)},handleBackspace=()=>{if(y.length>1){let e=y.slice(0,-1);e.endsWith(".")?(f(!1),b(e.slice(0,-1)),r(parseFloat(e.slice(0,-1))||0)):(b(e),r(parseFloat(e)||0))}else b("0"),f(!1),r(0)},handleClear=()=>{b("0"),f(!1),r(0)},handleToggleNegative=()=>{if(g){let e=y.startsWith("-")?y.slice(1):"-"+y;b(e),r(parseFloat(e)||0)}},handleDone=()=>{let e=parseFloat(y)||0;r(e),setTimeout(()=>{d()},50)},renderContent=()=>(0,a.jsxs)("div",{className:m?"w-full":"bg-white rounded-t-3xl w-full max-w-md animate-slide-up shadow-2xl",onClick:e=>e.stopPropagation(),style:{WebkitTapHighlightColor:"transparent"},children:[!m&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:c}),(0,a.jsx)("button",{onClick:d,className:"p-2 active:bg-gray-100 rounded-lg",style:{WebkitTapHighlightColor:"transparent"},children:(0,a.jsx)(n.Z,{size:20,className:"text-gray-500"})})]}),(0,a.jsx)("div",{className:m?"p-4 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl mb-3":"p-6 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl mb-2",children:(0,a.jsx)("div",{className:"text-right",children:x&&parseFloat(y)>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:m?"text-xs text-gray-500 mb-1":"text-sm text-gray-500 mb-1",children:c}),(0,a.jsx)("div",{className:m?"text-2xl font-bold text-primary-600":"text-3xl font-bold text-primary-600",children:(0,s.formatIndianCurrency)(parseFloat(y)||0)}),(0,a.jsx)("div",{className:m?"text-sm text-gray-400 mt-1 font-mono":"text-base text-gray-400 mt-1 font-mono",children:y||"0"})]}):(0,a.jsx)("div",{className:m?"text-3xl font-bold text-gray-900 font-mono tracking-tight":"text-4xl font-bold text-gray-900 font-mono tracking-tight",children:y||"0"})})}),(0,a.jsx)("div",{className:m?"p-2":"p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2.5",children:[(0,a.jsx)("button",{onClick:()=>handleNumberPress("7"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"7"}),(0,a.jsx)("button",{onClick:()=>handleNumberPress("8"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"8"}),(0,a.jsx)("button",{onClick:()=>handleNumberPress("9"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"9"}),(0,a.jsx)("button",{onClick:()=>handleNumberPress("4"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"4"}),(0,a.jsx)("button",{onClick:()=>handleNumberPress("5"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"5"}),(0,a.jsx)("button",{onClick:()=>handleNumberPress("6"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"6"}),(0,a.jsx)("button",{onClick:()=>handleNumberPress("1"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"1"}),(0,a.jsx)("button",{onClick:()=>handleNumberPress("2"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"2"}),(0,a.jsx)("button",{onClick:()=>handleNumberPress("3"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"3"}),g?(0,a.jsx)("button",{onClick:handleToggleNegative,className:"h-16 bg-gray-50 border-2 border-gray-200 rounded-2xl text-xl font-bold text-gray-700 active:bg-gray-100 active:scale-[0.95] transition-all duration-150 shadow-sm touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"\xb1"}):(0,a.jsx)("button",{onClick:handleClear,className:"h-16 bg-gray-50 border-2 border-gray-200 rounded-2xl flex items-center justify-center active:bg-gray-100 active:scale-[0.95] transition-all duration-150 shadow-sm touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:(0,a.jsx)(l.Z,{size:22,className:"text-gray-700"})}),(0,a.jsx)("button",{onClick:()=>handleNumberPress("0"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"0"}),(0,a.jsx)("button",{onClick:()=>handleNumberPress("."),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"."}),(0,a.jsx)("button",{onClick:handleBackspace,className:"h-16 bg-gradient-to-br from-gray-100 to-gray-200 border-2 border-gray-300 rounded-2xl flex items-center justify-center active:from-gray-200 active:to-gray-300 active:scale-[0.95] transition-all duration-150 shadow-sm touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:(0,a.jsx)(o.Z,{size:22,className:"text-gray-700"})}),!u&&(0,a.jsx)("button",{onClick:handleDone,className:m?"h-14 bg-gradient-to-br from-primary-600 to-primary-700 text-white rounded-xl text-base font-bold active:from-primary-700 active:to-primary-800 active:scale-[0.97] transition-all duration-150 col-span-2 shadow-lg shadow-primary-600/40 touch-manipulation":"h-16 bg-gradient-to-br from-primary-600 to-primary-700 text-white rounded-2xl text-lg font-bold active:from-primary-700 active:to-primary-800 active:scale-[0.97] transition-all duration-150 col-span-2 shadow-lg shadow-primary-600/40 touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"Done"}),u&&(0,a.jsx)("div",{className:"col-span-2"})]})})]});return m?renderContent():(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-[100000] flex items-end justify-center backdrop-blur-sm",onClick:e=>{e.target===e.currentTarget&&d()},children:renderContent()})}},70258:function(e,t,r){r.d(t,{Z:function(){return SelectList}});var a=r(57437),i=r(82549),n=r(41827),l=r(9883),o=r(2265);function SelectList(e){let{options:t,value:r,onChange:s,onClose:d,label:c="Select Option",allowCustom:h=!1,onCustomAdd:g,multiSelect:m=!1,selectedValues:u=[],onMultiChange:x,inline:y=!1,autoFocusSearch:b=!0}=e,[p,f]=(0,o.useState)(""),[v,w]=(0,o.useState)(!1),[j,N]=(0,o.useState)(""),k=t.filter(e=>e.toLowerCase().includes(p.toLowerCase())),handleSelect=e=>{if(m&&x){let t=u.includes(e)?u.filter(t=>t!==e):[...u,e];x(t)}else s(e),d()},handleCustomAdd=()=>{j.trim()&&g&&(g(j.trim()),s(j.trim()),y||d(),N(""),w(!1))},renderContent=()=>(0,a.jsxs)("div",{className:y?"w-full flex flex-col":"bg-white rounded-t-3xl w-full max-w-md max-h-[80vh] flex flex-col animate-slide-up shadow-2xl",style:{WebkitTapHighlightColor:"transparent",...y?{maxHeight:"60vh"}:{}},onClick:e=>e.stopPropagation(),children:[!y&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:c}),(0,a.jsx)("button",{onClick:d,className:"p-2 active:bg-gray-100 rounded-lg",style:{WebkitTapHighlightColor:"transparent"},children:(0,a.jsx)(i.Z,{size:20,className:"text-gray-500"})})]}),!v&&(0,a.jsxs)("div",{className:"".concat(y?"p-2":"p-4"," flex-shrink-0 ").concat(y?"":"border-b border-gray-200"),children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.Z,{size:y?16:18,className:"absolute ".concat(y?"left-2":"left-3"," top-1/2 -translate-y-1/2 text-gray-400")}),(0,a.jsx)("input",{type:"text",value:p,onChange:e=>f(e.target.value),placeholder:"Search...",className:"w-full ".concat(y?"pl-8 pr-3 py-2":"pl-10 pr-4 py-2.5"," bg-gray-50 border border-gray-200 ").concat(y?"rounded-lg":"rounded-xl"," focus:outline-none focus:ring-2 focus:ring-primary-500"),style:{fontSize:y?"14px":"16px"},autoFocus:b&&!y})]}),h&&y&&(0,a.jsx)("div",{className:"flex justify-end mt-2",children:(0,a.jsx)("button",{type:"button",onClick:()=>w(!0),className:"text-xs font-semibold text-primary-600 active:text-primary-700",style:{WebkitTapHighlightColor:"transparent"},children:"+ Add New"})})]}),v?(0,a.jsxs)("div",{className:"".concat(y?"p-2":"p-4"," flex-1 flex flex-col"),children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Enter New ",c]}),(0,a.jsx)("input",{type:"text",value:j,onChange:e=>N(e.target.value),placeholder:"Enter ".concat(c.toLowerCase()),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500",style:{fontSize:"16px"},autoFocus:!0})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-auto",children:[(0,a.jsx)("button",{onClick:()=>{w(!1),N("")},className:"flex-1 h-12 bg-gray-100 text-gray-700 rounded-xl font-semibold active:bg-gray-200 transition-colors",style:{WebkitTapHighlightColor:"transparent"},children:"Cancel"}),(0,a.jsx)("button",{onClick:handleCustomAdd,disabled:!j.trim(),className:"flex-1 h-12 bg-primary-600 text-white rounded-xl font-semibold active:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{WebkitTapHighlightColor:"transparent"},children:"Add"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",style:{minHeight:0},children:k.length>0?(0,a.jsxs)("div",{className:y?"p-1.5":"p-2",children:[!m&&r&&(0,a.jsx)("button",{onClick:()=>{s(""),y||d()},className:"w-full text-left ".concat(y?"px-3 py-2 rounded-lg mb-0.5":"px-4 py-3 rounded-xl mb-1"," transition-all duration-100 bg-gray-50 border border-gray-300 text-gray-600 active:bg-gray-100 active:scale-[0.98]"),style:{WebkitTapHighlightColor:"transparent"},children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:y?"text-sm font-medium":"text-base font-medium",children:"Clear selection"}),(0,a.jsx)(i.Z,{size:y?16:18,className:"text-gray-400"})]})}),k.map(e=>{let t=m?u.includes(e):r===e;return(0,a.jsx)("button",{onClick:()=>handleSelect(e),className:"w-full text-left ".concat(y?"px-3 py-2 rounded-lg mb-0.5":"px-4 py-3 rounded-xl mb-1"," transition-all duration-100 ").concat(t?"bg-primary-50 border-2 border-primary-500 text-primary-700 shadow-sm":"bg-white border border-gray-200 text-gray-900 active:bg-gray-50 active:scale-[0.98]"),style:{WebkitTapHighlightColor:"transparent"},children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:y?"text-sm font-medium":"text-base font-medium",children:e}),t&&(0,a.jsx)("div",{className:"".concat(y?"w-4 h-4":"w-5 h-5"," bg-primary-600 rounded-full flex items-center justify-center"),children:(0,a.jsx)("span",{className:"text-white text-xs",children:"✓"})})]})},e)})]}):(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No options found"})}),h&&!v&&!y&&(0,a.jsx)("div",{className:"p-4 border-t border-gray-200 flex-shrink-0 bg-white",children:(0,a.jsxs)("button",{onClick:()=>w(!0),className:"w-full h-12 bg-gray-100 border border-gray-200 rounded-xl font-semibold text-gray-700 active:bg-gray-200 transition-colors flex items-center justify-center gap-2",style:{WebkitTapHighlightColor:"transparent"},children:[(0,a.jsx)(l.Z,{size:18}),"Add New"]})}),m&&(0,a.jsx)("div",{className:"p-4 border-t border-gray-200 flex-shrink-0",children:(0,a.jsxs)("button",{onClick:d,disabled:0===u.length,className:"w-full h-12 bg-primary-600 text-white rounded-xl font-semibold active:bg-primary-700 active:scale-[0.97] transition-transform duration-100 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-primary-600/30",style:{WebkitTapHighlightColor:"transparent"},children:["Done ",u.length>0&&"(".concat(u.length," selected)")]})})]})]});return y?renderContent():(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-[100000] flex items-end justify-center backdrop-blur-sm",onClick:e=>{e.target===e.currentTarget&&d()},children:renderContent()})}},41587:function(e,t,r){r.d(t,{Z:function(){return TruckLoading}});var a=r(57437),i=r(16691),n=r.n(i),l=r(2265);function TruckLoading(e){let{size:t=200,className:r="",text:i,inline:o=!1}=e,s="/truck-unloading.gif",[d,c]=(0,l.useState)(!1);return o?(0,a.jsxs)("div",{className:"flex items-center gap-2 ".concat(r),children:[(0,a.jsx)("div",{style:{width:t,height:t,position:"relative"},children:d?(0,a.jsx)(TruckUnloadingAnimation,{size:t}):(0,a.jsx)(n(),{src:s,alt:"Loading...",fill:!0,sizes:"".concat(t,"px"),style:{objectFit:"contain"},onError:()=>c(!0)})}),i&&(0,a.jsx)("span",{className:"text-sm text-gray-500",children:i})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 ".concat(r),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[(0,a.jsx)("div",{style:{width:t,height:t,position:"relative",maxWidth:"100%",display:"block",margin:"0 auto"},children:d?(0,a.jsx)(TruckUnloadingAnimation,{size:t}):(0,a.jsx)(n(),{src:s,alt:"Loading materials...",fill:!0,sizes:"".concat(t,"px"),style:{objectFit:"contain"},onError:()=>c(!0)})}),i&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:i})]})}function TruckUnloadingAnimation(e){let{size:t}=e,r="truckGrad-".concat(Math.random().toString(36).substr(2,9));return(0,a.jsxs)("svg",{width:t,height:t,viewBox:"0 0 200 150",preserveAspectRatio:"xMidYMid meet",style:{display:"block",width:"100%",height:"100%",overflow:"hidden"},children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:r,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,a.jsx)("stop",{offset:"0%",style:{stopColor:"#2e31fb",stopOpacity:1}}),(0,a.jsx)("stop",{offset:"100%",style:{stopColor:"#1e21d9",stopOpacity:1}})]})}),(0,a.jsx)("line",{x1:"0",y1:"130",x2:"200",y2:"130",stroke:"#666",strokeWidth:"2"}),(0,a.jsx)("rect",{x:"20",y:"80",width:"80",height:"40",fill:"url(#".concat(r,")"),rx:"4",className:"truck-animate"}),(0,a.jsx)("rect",{x:"100",y:"70",width:"50",height:"50",fill:"url(#".concat(r,")"),rx:"4",className:"truck-animate"}),(0,a.jsx)("rect",{x:"105",y:"75",width:"20",height:"15",fill:"#87CEEB",rx:"2",className:"truck-animate"}),(0,a.jsxs)("g",{className:"truck-animate",children:[(0,a.jsxs)("g",{transform:"translate(45, 125)",children:[(0,a.jsx)("circle",{r:"12",fill:"#333",className:"wheel-animate",style:{transformOrigin:"0 0"}}),(0,a.jsx)("circle",{r:"8",fill:"#666"})]}),(0,a.jsxs)("g",{transform:"translate(75, 125)",children:[(0,a.jsx)("circle",{r:"12",fill:"#333",className:"wheel-animate",style:{transformOrigin:"0 0"}}),(0,a.jsx)("circle",{r:"8",fill:"#666"})]})]}),(0,a.jsx)("rect",{x:"150",y:"90",width:"40",height:"30",fill:"#888",rx:"3",className:"trolley-animate"}),(0,a.jsxs)("g",{className:"trolley-animate",children:[(0,a.jsx)("g",{transform:"translate(160, 125)",children:(0,a.jsx)("circle",{r:"6",fill:"#333",className:"wheel-animate-fast",style:{transformOrigin:"0 0"}})}),(0,a.jsx)("g",{transform:"translate(180, 125)",children:(0,a.jsx)("circle",{r:"6",fill:"#333",className:"wheel-animate-fast",style:{transformOrigin:"0 0"}})})]}),(0,a.jsx)("line",{x1:"100",y1:"100",x2:"150",y2:"105",stroke:"#555",strokeWidth:"3",className:"arm-animate"})]})}},74931:function(e,t,r){r.d(t,{formatIndianCurrency:function(){return formatIndianCurrency}});let formatIndianCurrency=e=>{let t=Math.round(e).toString();if(t.length<=3)return"₹".concat(t);let r=t.split("").reverse(),a=[];a.push(r.slice(0,3).reverse().join(""));for(let e=3;e<r.length;e+=2){let t=r.slice(e,e+2).reverse().join("");t&&a.push(t)}return"₹".concat(a.reverse().join(","))}},98025:function(e,t,r){r.d(t,{z:function(){return s}});var a=r(24086),i=r(45050),n=r(70349),l=r(28521);let o="invoices",generateInvoiceNumber=()=>{let e=new Date,t=(0,l.ZP)(e,"yyMMddHHmm");return"ROYAL".concat(t)},s={async createInvoice(e){let t=(0,i.z)();if(!t)throw Error("Firebase db is not initialized. Check your Firebase configuration and .env.local file.");try{let r=[];for(let t of e){let e=await n.XK.getOrderById(t);e&&r.push(e)}if(0===r.length)throw Error("No valid orders found");let i=r.reduce((e,t)=>e+t.total,0),l=r[0].partyName,s=r[0].siteName,d=new Date().toISOString(),c=new Date(Date.now()+6048e5).toISOString(),h={invoiceNumber:generateInvoiceNumber(),orderIds:e,totalAmount:i,paidAmount:0,partialPayments:[],createdAt:d,dueDate:c,paid:!1,overdue:!1,partyName:l,siteName:s,archived:!1},g=await (0,a.ET)((0,a.hJ)(t,o),h);for(let t of e){let e=await n.XK.getOrderById(t);e&&await n.XK.updateOrder(t,{invoiced:!0,invoiceId:g.id})}return console.log("✅ Invoice created successfully with ID:",g.id),g.id}catch(e){throw console.error("❌ Firestore error creating invoice:",e),Error("Failed to create invoice: ".concat(e.message||"Unknown error"))}},async getAllInvoices(e){let t=(0,i.z)();if(!t)return console.warn("Firebase is not configured. Returning empty array."),[];let r=(0,a.IO)((0,a.hJ)(t,o),(0,a.Xo)("createdAt","desc"));e&&(e.partyName&&(r=(0,a.IO)(r,(0,a.ar)("partyName","==",e.partyName))),void 0!==e.paid&&(r=(0,a.IO)(r,(0,a.ar)("paid","==",e.paid))));let n=await (0,a.PL)(r),l=[];n.forEach(e=>{let t=e.data(),r={id:e.id,...t};if(r.paid)r.overdue=!1;else{let e=new Date(r.dueDate),t=new Date;r.overdue=t>e}l.push(r)});let s=l;return((null==e?void 0:e.startDate)||(null==e?void 0:e.endDate))&&(s=l.filter(t=>{let r=new Date(t.createdAt);return!(e.startDate&&r<new Date(e.startDate)||e.endDate&&r>new Date(e.endDate))})),(null==e?void 0:e.overdue)!==void 0&&(s=s.filter(t=>t.overdue===e.overdue)),s},async getInvoiceById(e){let t=await this.getAllInvoices();return t.find(t=>t.id===e)||null},async addPayment(e,t,r){let n=(0,i.z)();if(!n)throw Error("Firebase is not configured.");let l=await this.getInvoiceById(e);if(!l)throw Error("Invoice not found");let s=l.paidAmount||0,d=s+t,c=d>=l.totalAmount,h=new Date().toISOString(),g={id:Date.now().toString()+Math.random().toString(36).substr(2,9),amount:t,date:h,createdAt:h};r&&r.trim()&&(g.note=r.trim());let m=[...l.partialPayments||[],g];try{let t=(0,a.JU)(n,o,e);await (0,a.r7)(t,{paidAmount:d,partialPayments:m,paid:c,overdue:!1,updatedAt:new Date().toISOString()}),c&&!l.archived&&await this.archiveOrders(e),console.log("✅ Payment added successfully")}catch(e){throw console.error("Error adding payment:",e),Error("Failed to add payment: ".concat(e.message||"Unknown error"))}},async removePayment(e,t){let r=(0,i.z)();if(!r)throw Error("Firebase is not configured.");let n=await this.getInvoiceById(e);if(!n)throw Error("Invoice not found");let l=n.partialPayments||[],s=l.find(e=>e.id===t);if(!s)throw Error("Payment record not found");let d=l.filter(e=>e.id!==t),c=d.reduce((e,t)=>e+t.amount,0),h=c>=n.totalAmount;try{let t=(0,a.JU)(r,o,e);await (0,a.r7)(t,{paidAmount:c,partialPayments:d.length>0?d:(0,a.AK)(),paid:h,updatedAt:new Date().toISOString()}),!h&&n.archived&&await this.unarchiveOrders(e),console.log("✅ Payment removed successfully")}catch(e){throw console.error("Error removing payment:",e),Error("Failed to remove payment: ".concat(e.message||"Unknown error"))}},async archiveOrders(e){let t=await this.getInvoiceById(e);if(!t)throw Error("Invoice not found");try{for(let e of t.orderIds)await n.XK.updateOrder(e,{archived:!0});let r=(0,i.z)();if(r){let t=(0,a.JU)(r,o,e);await (0,a.r7)(t,{archived:!0,updatedAt:new Date().toISOString()})}console.log("✅ Orders archived successfully")}catch(e){throw console.error("Error archiving orders:",e),Error("Failed to archive orders: ".concat(e.message||"Unknown error"))}},async unarchiveOrders(e){let t=await this.getInvoiceById(e);if(!t)throw Error("Invoice not found");try{for(let e of t.orderIds)await n.XK.updateOrder(e,{archived:!1});let r=(0,i.z)();if(r){let t=(0,a.JU)(r,o,e);await (0,a.r7)(t,{archived:!1,updatedAt:new Date().toISOString()})}console.log("✅ Orders unarchived successfully")}catch(e){throw console.error("Error unarchiving orders:",e),Error("Failed to unarchive orders: ".concat(e.message||"Unknown error"))}},async deleteInvoice(e){let t=(0,i.z)();if(!t)throw Error("Firebase is not configured.");try{let r=await this.getInvoiceById(e);if(r)for(let e of r.orderIds){let r=(0,a.JU)(t,"orders",e);await (0,a.r7)(r,{invoiced:!1,invoiceId:(0,a.AK)(),updatedAt:new Date().toISOString()})}await (0,a.oe)((0,a.JU)(t,o,e)),console.log("✅ Invoice deleted successfully")}catch(e){throw console.error("Error deleting invoice:",e),Error("Failed to delete invoice: ".concat(e.message||"Unknown error"))}},async getUniquePartyNames(){let e=(0,i.z)();if(!e)return[];try{let t=(0,a.IO)((0,a.hJ)(e,o)),r=await (0,a.PL)(t),i=new Set;return r.forEach(e=>{let t=e.data();t.partyName&&"string"==typeof t.partyName&&i.add(t.partyName.trim())}),Array.from(i).sort()}catch(e){return console.error("Error fetching party names:",e),[]}}}}}]);