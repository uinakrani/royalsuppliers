(()=>{var e={};e.id=931,e.ids=[931],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},71569:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var a=s(67096),r=s(16132),i=s(37284),l=s.n(i),n=s(32564),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,83982)),"C:\\Users\\ashis\\Desktop\\royalsuppliers\\royalsuppliers\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,29184)),"C:\\Users\\ashis\\Desktop\\royalsuppliers\\royalsuppliers\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\ashis\\Desktop\\royalsuppliers\\royalsuppliers\\app\\page.tsx"],m="/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},29499:(e,t,s)=>{Promise.resolve().then(s.bind(s,17034))},17034:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Dashboard});var a=s(30784),r=s(9885),i=s(59233),l=s(39431),n=s(93174),o=s(17658),d=s(47078),c=s(89320),m=s(17796),x=s(533);let calculateStats=(e,t,s,a)=>{let r={totalWeight:0,totalCost:0,totalProfit:0,currentBalance:0,totalOrders:e.length,paidOrders:0,unpaidOrders:0,partialOrders:0,estimatedProfit:0,paymentReceived:0,costAmount:0,moneyOut:0,rawMaterialPaymentsOutstanding:0,customerPaymentsReceived:0,rawMaterialPaymentsReceived:0,profitReceived:0,calculatedBalance:0};if(e.forEach(e=>{r.totalWeight+=e.weight;let t=e.originalTotal+e.additionalCost;r.totalCost+=t,r.costAmount+=t;let s=(0,x.I)(e);r.totalProfit+=s,r.estimatedProfit+=s;let a=e.partialPayments||[],i=a.reduce((e,t)=>e+t.amount,0);r.rawMaterialPaymentsReceived+=i;let l=Math.max(0,e.originalTotal-i);r.rawMaterialPaymentsOutstanding+=l,i>=e.originalTotal-250&&e.originalTotal>0?r.paidOrders++:(i>0&&r.partialOrders++,r.unpaidOrders++)}),t){let e=0,i=0,l=0;t.forEach(t=>{let r=new Date(t.date),n=!0;s&&r<s&&(n=!1),a&&r>a&&(n=!1),n&&("credit"===t.type?(e+=t.amount,t.partyName&&t.partyName.trim()&&(i+=t.amount)):"debit"===t.type&&(l+=t.amount))}),r.customerPaymentsReceived=i,r.moneyOut=l,r.calculatedBalance=i-l}return r},getDateRangeForDuration=e=>{let t;let s=new Date,a=s;switch(e){case"7days":t=(0,d.Z)(s,7);break;case"lastMonth":t=(0,n.Z)((0,c.Z)(s,1)),a=(0,o.Z)((0,c.Z)(s,1));break;case"last3Months":t=(0,c.Z)(s,3);break;case"last6Months":t=(0,c.Z)(s,6);break;case"lastYear":t=(0,m.Z)((0,c.Z)(s,12)),a=(0,c.Z)(s,12);break;default:t=(0,n.Z)(s),a=(0,o.Z)(s)}return{start:t,end:a}};var p=s(81766),u=s(2861),h=s(93188),b=s(22385),g=s(12029),f=s(71163),y=s(89815),j=s(91964),v=s(51831),N=s(8042),w=s(50007),C=s(78260),P=s(37631),k=s(66908),O=s(37004),M=s(2389),R=s(92484),A=s(58683),Z=s(97684),I=s(57114),D=s(37317),S=s(9909),T=s(56365);function Dashboard(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)({totalWeight:0,totalCost:0,totalProfit:0,currentBalance:0,totalOrders:0,paidOrders:0,unpaidOrders:0,partialOrders:0,estimatedProfit:0,paymentReceived:0,costAmount:0,moneyOut:0,rawMaterialPaymentsOutstanding:0,customerPaymentsReceived:0,rawMaterialPaymentsReceived:0,profitReceived:0,calculatedBalance:0}),[o,d]=(0,r.useState)(!0),[c,m]=(0,r.useState)(null),[E,_]=(0,r.useState)({}),[q,z]=(0,r.useState)(!1),[L,B]=(0,r.useState)("currentMonth"),[H,W]=(0,r.useState)(""),[F,U]=(0,r.useState)(""),[K,Y]=(0,r.useState)(""),[$,G]=(0,r.useState)(""),[X,V]=(0,r.useState)([]),[Q,J]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(null),es=(0,I.useRouter)();(0,r.useEffect)(()=>{loadPartyNames()},[]),(0,r.useEffect)(()=>{let e=setTimeout(()=>{loadOrders(),loadInvestment()},100);return()=>clearTimeout(e)},[E,L]);let loadInvestment=async()=>{try{let e=await T.K.getInvestment();et(e)}catch(e){console.error("Error loading investment:",e)}},loadPartyNames=async()=>{try{let e=await i.XK.getUniquePartyNames();V(e)}catch(e){console.error("Error loading party names:",e)}},loadOrders=async()=>{d(!0);try{let e=new Promise((e,t)=>{setTimeout(()=>t(Error("Loading timeout after 30 seconds")),3e4)}),s=await Promise.race([i.XK.getAllOrders(),e]),a=null,r=null;if(E.startDate||E.endDate)E.startDate&&(a=new Date(E.startDate)).setHours(0,0,0,0),E.endDate&&(r=new Date(E.endDate)).setHours(23,59,59,999);else if(L){let{start:e,end:t}=getDateRangeForDuration(L);(a=e).setHours(0,0,0,0),(r=t).setHours(23,59,59,999)}let o=s;if((a||r)&&(o=o.filter(e=>{try{let t=new Date(e.date);if(isNaN(t.getTime()))return console.warn("Invalid order date:",e.date,e.id),!1;if(t.setHours(12,0,0,0),a&&t<a||r&&t>r)return!1;return!0}catch(t){return console.warn("Error parsing order date:",e.date,t),!1}})),E.partyName){let e=E.partyName.split(",").map(e=>e.trim().toLowerCase());o=o.filter(t=>e.some(e=>t.partyName.toLowerCase()===e))}if(E.material){let e=E.material.split(",").map(e=>e.trim().toLowerCase());o=o.filter(t=>{let s=Array.isArray(t.material)?t.material.map(e=>e.toLowerCase()):[t.material.toLowerCase()];return e.some(e=>s.some(t=>t.includes(e)))})}let d=[];try{d=await S.ledgerService.list()}catch(e){console.warn("Error loading ledger entries:",e)}d.reduce((e,t)=>e+("credit"===t.type?t.amount:-t.amount),0);let c=d.reduce((e,t)=>e+("debit"===t.type?t.amount:0),0),m=s.reduce((e,t)=>e+t.total,0),p=s.reduce((e,t)=>{let s=(t.customerPayments||[]).reduce((e,t)=>e+t.amount,0);return e+Math.max(0,t.total-s)},0),u=calculateStats(o,d,a||void 0,r||void 0),h=0;o.forEach(e=>{let t=(e.customerPayments||[]).reduce((e,t)=>e+t.amount,0),s=(e.partialPayments||[]).reduce((e,t)=>e+t.amount,0),a=t-s-e.additionalCost;h+=a}),u.profitReceived=h;let b=0,g=0;d.forEach(e=>{"credit"===e.type&&e.partyName?b+=e.amount:"debit"===e.type&&(g+=e.amount)});let f=(ee?.amount||0)+b-g;u.totalLedgerBalance=f,u.totalMoneyOutAllTime=c,u.totalRevenueAllTime=m,u.totalReceivables=p,t(o),n(u);let y=0,j=new Map(o.map(e=>[e.id,e]));try{let e=await l.z.getAllInvoices(),t=await i.XK.getAllOrders(),s=new Map(t.map(e=>[e.id,e])),n=new Map;e.forEach(e=>{if(E.partyName){let t=E.partyName.split(",").map(e=>e.trim().toLowerCase());if(!t.some(t=>e.partyName.toLowerCase()===t))return}if(E.material){let t=E.material.split(",").map(e=>e.trim().toLowerCase()),a=e.orderIds.some(e=>{let a=s.get(e);if(!a)return!1;let r=Array.isArray(a.material)?a.material.map(e=>e.toLowerCase()):[a.material.toLowerCase()];return t.some(e=>r.some(t=>t.includes(e)))});if(!a)return}let t=0;e.orderIds.forEach(e=>{let a=s.get(e);a&&j.has(e)&&(t+=a.total)}),e.partialPayments&&e.partialPayments.length>0&&e.partialPayments.forEach(i=>{let l=new Date(i.date),o=!0;a&&l<a&&(o=!1),r&&l>r&&(o=!1),o&&t>0&&e.orderIds.forEach(e=>{let a=s.get(e);if(a&&j.has(e)){let s=a.total/t,r=i.amount*s,l=n.get(e)||0;n.set(e,l+r)}})})});try{let e=await D.s.getAllPayments();e.forEach(e=>{if(E.partyName){let t=E.partyName.split(",").map(e=>e.trim().toLowerCase());if(!t.some(t=>e.partyName.toLowerCase()===t))return}let t=new Date(e.date),s=!0;a&&t<a&&(s=!1),r&&t>r&&(s=!1),s&&o.forEach(t=>{if(t.partyName===e.partyName){let s=n.get(t.id)||0,a=o.filter(t=>t.partyName===e.partyName).length;a>0&&n.set(t.id,s+e.amount/a)}})})}catch(e){console.warn("Party payments not included:",e)}o.forEach(e=>{let t=n.get(e.id)||0;if(e.total>0){let s=(0,x.I)(e);if(t>=e.total)y+=s;else if(t>0){let a=s/e.total;y+=a*t}}})}catch(e){console.error("Error loading invoices for payment calculation:",e)}u.paymentReceived=u.customerPaymentsReceived,u.profitReceived=y,t(o),n(u)}catch(e){if(console.error("Error loading orders:",e),e?.message?.includes("timeout")){let e="Loading timed out. Please check your Firebase configuration or network connection.";console.error(e),m(e)}else m("Failed to load orders. Please check your Firebase configuration.");t([]),n({totalWeight:0,totalCost:0,totalProfit:0,currentBalance:0,totalOrders:0,paidOrders:0,unpaidOrders:0,partialOrders:0,estimatedProfit:0,paymentReceived:0,costAmount:0,moneyOut:0,rawMaterialPaymentsOutstanding:0,customerPaymentsReceived:0,rawMaterialPaymentsReceived:0,profitReceived:0,calculatedBalance:0})}finally{d(!1)}},applyFilters=()=>{let e={};H&&(e.partyName=H),F&&(e.material=F),K&&(e.startDate=K),$&&(e.endDate=$),_(e),z(!1)},resetFilters=()=>{W(""),U(""),Y(""),G(""),B("currentMonth"),_({}),z(!1)};return(0,a.jsxs)("div",{className:"bg-gray-50",style:{height:"100dvh",minHeight:"100dvh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,a.jsxs)("div",{className:"bg-primary-600 text-white p-2.5 pt-safe sticky top-0 z-40",style:{flexShrink:0},children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h1",{className:"text-xl font-bold",children:"Dashboard"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:e=>{(0,M.m)(e),J(!0)},className:"p-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all native-press flex items-center justify-center",style:{WebkitTapHighlightColor:"transparent",position:"relative",overflow:"hidden"},children:a.jsx(b.Z,{size:18})}),a.jsx("button",{onClick:e=>{(0,M.m)(e),z(!q)},className:"p-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all native-press flex items-center justify-center",style:{WebkitTapHighlightColor:"transparent",position:"relative",overflow:"hidden"},children:a.jsx(g.Z,{size:18})})]})]}),a.jsx("div",{className:"mt-2",children:(0,a.jsxs)("select",{value:L,onChange:e=>B(e.target.value),className:"w-full px-3 py-2 bg-white/95 backdrop-blur-sm border border-white/30 rounded-xl text-sm font-medium text-gray-900 focus:outline-none focus:ring-2 focus:ring-white/50 transition-all",children:[a.jsx("option",{value:"currentMonth",children:"Current Month"}),a.jsx("option",{value:"7days",children:"Last 7 Days"}),a.jsx("option",{value:"lastMonth",children:"Last Month"}),a.jsx("option",{value:"last3Months",children:"Last 3 Months"}),a.jsx("option",{value:"last6Months",children:"Last 6 Months"}),a.jsx("option",{value:"lastYear",children:"Last Year"})]})})]}),(0,a.jsxs)("div",{style:{flex:1,overflowY:"auto",WebkitOverflowScrolling:"touch",paddingBottom:"4rem"},children:[a.jsx(R.Z,{isOpen:q,onClose:()=>z(!1),title:"Filters",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",value:K,onChange:e=>Y(e.target.value),className:"w-full px-2 py-1.5 bg-white border border-gray-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),a.jsx("input",{type:"date",value:$,onChange:e=>G(e.target.value),className:"w-full px-2 py-1.5 bg-white border border-gray-300 rounded-lg"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Party Name"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 p-2 bg-gray-50 rounded-lg border border-gray-200 max-h-48 overflow-y-auto",children:X.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-1.5 cursor-pointer hover:bg-gray-100 p-1.5 rounded transition-colors",children:[a.jsx("input",{type:"checkbox",checked:H.split(",").filter(e=>e.trim()).includes(e),onChange:t=>{let s=H.split(",").filter(e=>e.trim());W((t.target.checked?[...s,e]:s.filter(t=>t!==e)).join(","))},className:"custom-checkbox"}),a.jsx("span",{className:"text-xs text-gray-700 truncate",children:e})]},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 p-2 bg-gray-50 rounded-lg border border-gray-200 max-h-48 overflow-y-auto",children:["Bodeli","Panetha","Nareshware","Kali","Chikhli Kapchi VSI","Chikhli Kapchi","Areth"].map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-1.5 cursor-pointer hover:bg-gray-100 p-1.5 rounded transition-colors",children:[a.jsx("input",{type:"checkbox",checked:F.split(",").filter(e=>e.trim()).includes(e),onChange:t=>{let s=F.split(",").filter(e=>e.trim());U((t.target.checked?[...s,e]:s.filter(t=>t!==e)).join(","))},className:"custom-checkbox"}),a.jsx("span",{className:"text-xs text-gray-700 truncate",children:e})]},e))})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2 border-t border-gray-200 sticky bottom-0 bg-white pb-2",children:[a.jsx("button",{onClick:()=>{applyFilters(),z(!1)},className:"flex-1 bg-primary-600 text-white px-2 py-1 rounded-lg text-xs font-medium hover:bg-primary-700 transition-colors",children:"Apply"}),a.jsx("button",{onClick:()=>{resetFilters(),z(!1)},className:"px-2 py-1 bg-gray-200 text-gray-700 rounded-lg text-xs font-medium hover:bg-gray-300 transition-colors",children:"Reset"})]})]})}),o?(0,a.jsxs)("div",{className:"fixed inset-0 flex flex-col items-center justify-center z-30 bg-gray-50 gap-4 p-4",children:[a.jsx(A.Z,{size:100}),c&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-w-md text-center",children:[a.jsx("p",{className:"text-sm text-red-800 mb-2",children:c}),a.jsx("button",{onClick:()=>{m(null),loadOrders()},className:"text-xs bg-red-600 text-white px-3 py-1.5 rounded hover:bg-red-700",children:"Retry"})]})]}):c?a.jsx("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[a.jsx("p",{className:"text-sm text-red-800 mb-3",children:c}),a.jsx("button",{onClick:()=>{m(null),loadOrders()},className:"text-xs bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Retry"})]})}):(0,a.jsxs)("div",{className:"p-3 space-y-3",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl p-4 text-white border-2 border-amber-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:a.jsx(f.Z,{size:20,className:"text-white"})}),a.jsx("h3",{className:"text-base font-bold text-white",children:"Your Investment (Capital)"})]}),a.jsx("p",{className:"text-3xl font-bold mb-1",children:ee?(0,p.formatIndianCurrency)(ee.amount):(0,p.formatIndianCurrency)(0)}),a.jsx("p",{className:"text-xs opacity-90 mb-3",children:ee?ee.note||"Your actual capital in the business":"Set your investment in Ledger page"}),ee&&(0,a.jsxs)("div",{className:"pt-3 border-t border-white/20 space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"bg-white/10 rounded-lg p-2 backdrop-blur-sm",children:[a.jsx("p",{className:"text-[10px] opacity-80 mb-0.5 uppercase tracking-wider",children:"Available Cash"}),a.jsx("p",{className:"text-sm font-bold text-white",children:(0,p.formatIndianCurrency)(s.totalLedgerBalance||0)})]}),(0,a.jsxs)("div",{className:"bg-white/10 rounded-lg p-2 backdrop-blur-sm",children:[a.jsx("p",{className:"text-[10px] opacity-80 mb-0.5 uppercase tracking-wider",children:"Market Receivables"}),a.jsx("p",{className:"text-sm font-bold text-white",children:(0,p.formatIndianCurrency)(s.totalReceivables||0)})]})]}),(0,a.jsxs)("div",{className:"space-y-1.5 pt-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"opacity-80",children:"Total Business Volume:"}),a.jsx("span",{className:"font-semibold",children:(0,p.formatIndianCurrency)(s.totalRevenueAllTime||0)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"opacity-80",children:"Capital Rotation:"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(y.Z,{size:12,className:"text-amber-200"}),(0,a.jsxs)("span",{className:"font-bold text-amber-100",children:[((s.totalRevenueAllTime||0)/(ee.amount||1)).toFixed(1),"x"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"opacity-80",children:"Investment Date:"}),a.jsx("span",{className:"font-semibold opacity-90",children:(0,h.ZP)(new Date(ee.date),"dd MMM yyyy")})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("div",{className:"p-2 bg-primary-100 rounded-xl",children:a.jsx(f.Z,{size:18,className:"text-primary-600"})}),a.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Financial Overview"})]}),(0,a.jsxs)("div",{className:"mb-3 p-3 bg-red-50 rounded-xl border border-red-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(j.Z,{size:16,className:"text-red-600"}),a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Money Going Out"})]}),a.jsx("span",{className:"text-lg font-bold text-red-600",children:(0,p.formatIndianCurrency)(s.moneyOut)})]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Total expenses (Raw materials + Additional costs)"})]}),s.rawMaterialPaymentsOutstanding>0&&(0,a.jsxs)("div",{className:"mb-3 p-3 bg-orange-50 rounded-xl border border-orange-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(v.Z,{size:16,className:"text-orange-600"}),a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Outstanding Raw Materials"})]}),a.jsx("span",{className:"text-lg font-bold text-orange-600",children:(0,p.formatIndianCurrency)(s.rawMaterialPaymentsOutstanding)})]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Yet to be paid for raw materials"})]}),(0,a.jsxs)("div",{className:"mb-3 p-3 bg-green-50 rounded-xl border border-green-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(N.Z,{size:16,className:"text-green-600"}),a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Money Received"})]}),a.jsx("span",{className:"text-lg font-bold text-green-600",children:(0,p.formatIndianCurrency)(s.customerPaymentsReceived)})]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Money received from parties (ledger credit entries with party name)"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-xl",children:a.jsx(w.Z,{size:18,className:"text-blue-600"})}),a.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Profit Analysis"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-3 bg-blue-50 rounded-xl border border-blue-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Estimated Profit"}),a.jsx("span",{className:"text-lg font-bold text-blue-600",children:(0,p.formatIndianCurrency)(s.estimatedProfit)})]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Total profit from all orders"})]}),(0,a.jsxs)("div",{className:"p-3 bg-purple-50 rounded-xl border border-purple-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Realized Cash Profit"}),a.jsx("span",{className:`text-lg font-bold ${s.profitReceived>=0?"text-purple-600":"text-red-600"}`,children:(0,p.formatIndianCurrency)(s.profitReceived)})]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Actual cash profit (Received - Spent - Costs)"}),s.estimatedProfit>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Recovery Rate"}),(0,a.jsxs)("span",{className:"text-xs font-semibold text-purple-700",children:[(s.profitReceived/s.estimatedProfit*100).toFixed(1),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:a.jsx("div",{className:"bg-purple-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,s.profitReceived/s.estimatedProfit*100))}%`}})})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-2xl p-4 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:a.jsx(f.Z,{size:20,className:"text-white"})}),a.jsx("h3",{className:"text-base font-bold text-white",children:"Current Balance"})]}),a.jsx("p",{className:"text-3xl font-bold mb-1",children:(0,p.formatIndianCurrency)(s.calculatedBalance)}),a.jsx("p",{className:"text-xs opacity-90 mb-3",children:"Money Received (from Parties) - Money Spent"}),(0,a.jsxs)("div",{className:"pt-3 border-t border-white/20 space-y-1.5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"opacity-80",children:"Received from Parties:"}),a.jsx("span",{className:"font-semibold",children:(0,p.formatIndianCurrency)(s.customerPaymentsReceived)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"opacity-80",children:"Spent (All Expenses):"}),(0,a.jsxs)("span",{className:"font-semibold",children:["-",(0,p.formatIndianCurrency)(s.moneyOut)]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs pt-1 border-t border-white/10",children:[a.jsx("span",{className:"opacity-80 font-medium",children:"Net Balance:"}),a.jsx("span",{className:`font-bold ${s.calculatedBalance>=0?"text-green-200":"text-red-200"}`,children:(0,p.formatIndianCurrency)(s.calculatedBalance)})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-4 text-white native-press",style:{animation:"fadeInUp 0.4s ease-out 0.1s both",WebkitTapHighlightColor:"transparent",position:"relative",overflow:"hidden"},onClick:e=>{(0,M.m)(e),es.push("/orders?filter=paid")},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:a.jsx(C.Z,{size:20,className:"text-white"})}),a.jsx(P.Z,{size:16,className:"opacity-70"})]}),a.jsx("p",{className:"text-2xl font-bold mb-0.5",children:(0,p.formatIndianCurrency)(s.currentBalance)}),a.jsx("p",{className:"text-xs opacity-90 font-medium",children:"Payment Balance"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-2xl p-4 text-white native-press",style:{animation:"fadeInUp 0.4s ease-out 0.2s both",WebkitTapHighlightColor:"transparent",position:"relative",overflow:"hidden"},onClick:e=>{(0,M.m)(e),es.push("/ledger")},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:a.jsx(k.Z,{size:20,className:"text-white"})}),a.jsx(P.Z,{size:16,className:"opacity-70"})]}),a.jsx("p",{className:"text-2xl font-bold mb-0.5",children:(0,p.formatIndianCurrency)(s.costAmount)}),a.jsx("p",{className:"text-xs opacity-90 font-medium",children:"Total Cost"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",style:{animation:"fadeInUp 0.4s ease-out 0.5s both"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("div",{className:"p-2 bg-primary-100 rounded-xl",children:a.jsx(y.Z,{size:18,className:"text-primary-600"})}),a.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Order Summary"})]}),(0,a.jsxs)("div",{className:"space-y-2.5",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-2.5 bg-gray-50 rounded-xl native-press",style:{WebkitTapHighlightColor:"transparent",position:"relative",overflow:"hidden"},onClick:e=>{(0,M.m)(e),es.push("/orders")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(O.Z,{size:16,className:"text-gray-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Orders"})]}),a.jsx("span",{className:"text-base font-bold text-gray-900",children:s.totalOrders})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-2.5 bg-green-50 rounded-xl native-press",style:{WebkitTapHighlightColor:"transparent",position:"relative",overflow:"hidden"},onClick:e=>{(0,M.m)(e),es.push("/orders?filter=paid")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Paid Orders"})]}),a.jsx("span",{className:"text-base font-bold text-green-600",children:s.paidOrders})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-2.5 bg-red-50 rounded-xl native-press",style:{WebkitTapHighlightColor:"transparent",position:"relative",overflow:"hidden"},onClick:e=>{(0,M.m)(e),es.push("/orders?filter=unpaid")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Unpaid Orders"})]}),a.jsx("span",{className:"text-base font-bold text-red-600",children:s.unpaidOrders})]}),s.partialOrders>0&&(0,a.jsxs)("div",{className:"flex justify-between items-center p-2.5 bg-yellow-50 rounded-xl native-press",style:{WebkitTapHighlightColor:"transparent",position:"relative",overflow:"hidden"},onClick:e=>{(0,M.m)(e),es.push("/orders?filter=partial")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Partial Payments"})]}),a.jsx("span",{className:"text-base font-bold text-yellow-600",children:s.partialOrders})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",style:{animation:"fadeInUp 0.4s ease-out 0.6s both"},children:[a.jsx("h3",{className:"text-base font-bold text-gray-900 mb-3",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("button",{onClick:e=>{(0,M.m)(e),J(!0)},className:"flex flex-col items-center justify-center gap-2 p-4 bg-primary-50 rounded-xl border-2 border-primary-200 native-press hover:bg-primary-100 transition-colors",style:{WebkitTapHighlightColor:"transparent",position:"relative",overflow:"hidden"},children:[a.jsx("div",{className:"p-2.5 bg-primary-600 rounded-xl",children:a.jsx(b.Z,{size:20,className:"text-white"})}),a.jsx("span",{className:"text-sm font-semibold text-primary-700",children:"New Order"})]}),(0,a.jsxs)("button",{onClick:e=>{(0,M.m)(e),es.push("/orders")},className:"flex flex-col items-center justify-center gap-2 p-4 bg-blue-50 rounded-xl border-2 border-blue-200 native-press hover:bg-blue-100 transition-colors",style:{WebkitTapHighlightColor:"transparent",position:"relative",overflow:"hidden"},children:[a.jsx("div",{className:"p-2.5 bg-blue-600 rounded-xl",children:a.jsx(O.Z,{size:20,className:"text-white"})}),a.jsx("span",{className:"text-sm font-semibold text-blue-700",children:"View Orders"})]})]})]})]}),Q&&a.jsx(Z.Z,{order:null,onClose:()=>J(!1),onSave:async e=>{let t=await i.XK.createOrder(e);J(!1),es.push(`/orders?highlight=${t}`)}})]}),a.jsx(u.Z,{})]})}},533:(e,t,s)=>{"use strict";s.d(t,{I:()=>getAdjustedProfit,w:()=>hasProfitAdjustments});let toNumber=e=>{if("number"==typeof e)return e;if("string"==typeof e){let t=Number(e);return isNaN(t)?0:t}return 0},getAdjustedProfit=e=>{let t=toNumber(e.expenseAdjustment),s=toNumber(e.revenueAdjustment),a=toNumber(e.adjustmentAmount),r=e.profit+t+s+a;return Math.round(100*r)/100},hasProfitAdjustments=e=>{let t=getAdjustedProfit(e);return Math.abs(t-e.profit)>.01}},83982:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>o});var a=s(95153);let r=(0,a.createProxy)(String.raw`C:\Users\ashis\Desktop\royalsuppliers\royalsuppliers\app\page.tsx`),{__esModule:i,$$typeof:l}=r,n=r.default,o=n}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[252,166,392,813,416,624,943,123,233,766,599,512,265,365],()=>__webpack_exec__(71569));module.exports=s})();