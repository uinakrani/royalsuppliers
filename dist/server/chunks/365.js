"use strict";exports.id=365,exports.ids=[365],exports.modules={56365:(t,e,i)=>{i.d(e,{K:()=>n});var r=i(60755),a=i(29904);let n=new class{async getInvestment(){try{let t=(0,r.z)();if(!t)throw Error("Database not initialized");let e=await (0,a.PL)((0,a.hJ)(t,this.collectionName));if(e.empty)return null;let i=e.docs[0];return{id:i.id,...i.data()}}catch(t){throw console.error("Error getting investment:",t),t}}async setInvestment(t,e,i){try{let n=(0,r.z)();if(!n)throw Error("Database not initialized");let o=await this.getInvestment(),c=new Date().toISOString();if(o&&o.id){let r=o.amount,s=o.date,l=o.note||"",d=r!==t||s!==e||l.trim()!==(i||"").trim();if(!d)return console.log("No changes detected for investment update, skipping."),o.id;return await (0,a.r7)((0,a.JU)(n,this.collectionName,o.id),{amount:t,date:e,note:i||"",updatedAt:c}),await this.logActivity({activityType:"updated",amount:t,previousAmount:r,date:e,previousDate:s,note:i,previousNote:l,timestamp:c}),o.id}{let r=await (0,a.ET)((0,a.hJ)(n,this.collectionName),{amount:t,date:e,note:i||"",createdAt:c,updatedAt:c});return await this.logActivity({activityType:"created",amount:t,date:e,note:i,timestamp:c}),r.id}}catch(t){throw console.error("Error setting investment:",t),t}}async getActivityLog(){try{let t=(0,r.z)();if(!t)return[];let e=(0,a.IO)((0,a.hJ)(t,this.activityCollectionName),(0,a.Xo)("timestamp","desc")),i=await (0,a.PL)(e);return i.docs.map(t=>({id:t.id,...t.data()}))}catch(t){return console.error("Error getting investment activity log:",t),[]}}async logActivity(t){try{let e=(0,r.z)();if(!e)return;await (0,a.ET)((0,a.hJ)(e,this.activityCollectionName),t)}catch(t){console.error("Error logging investment activity:",t)}}constructor(){this.collectionName="investment",this.activityCollectionName="investmentActivity"}}}};