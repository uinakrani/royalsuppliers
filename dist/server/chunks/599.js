"use strict";exports.id=599,exports.ids=[599],exports.modules={28571:(e,t,r)=>{r.d(t,{Z:()=>DatePicker});var a=r(30784),i=r(9885),l=r(56206),s=r(51910),n=r(4780),o=r(517),d=r(93188),c=r(93174),h=r(17658),g=r(5224),m=r(11871),x=r(78842),u=r(57359),y=r(89320),b=r(40222);let formatLocalDate=e=>{let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${a}`},parseLocalDate=e=>{let[t,r,a]=e.split("-").map(Number);return new Date(t,r-1,a)};function DatePicker({value:e,onChange:t,onClose:r,label:p="Select Date",inline:f=!1}){let v=e?parseLocalDate(e):new Date,[w,j]=(0,i.useState)(v),N=(0,c.Z)(w),k=(0,h.Z)(w),C=(0,g.Z)({start:N,end:k}),I=(0,b.Z)(N),S=Array(I).fill(null),T=[...S,...C],handleDateSelect=e=>{t(formatLocalDate(e)),r()},handlePrevMonth=()=>{j((0,y.Z)(w,1))},handleNextMonth=()=>{j((0,u.Z)(w,1))},handleToday=()=>{let e=new Date;t(formatLocalDate(e)),r()},D=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],renderContent=()=>(0,a.jsxs)("div",{className:f?"w-full":"bg-white rounded-t-3xl w-full max-w-md animate-slide-up shadow-2xl",onClick:e=>e.stopPropagation(),style:{WebkitTapHighlightColor:"transparent"},children:[!f&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-200",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900",children:p}),a.jsx("button",{onClick:r,className:"p-1.5 active:bg-gray-100 rounded-lg",style:{WebkitTapHighlightColor:"transparent"},children:a.jsx(l.Z,{size:18,className:"text-gray-500"})})]}),(0,a.jsxs)("div",{className:`flex items-center justify-between ${f?"p-2":"p-3"} ${f?"":"border-b border-gray-200"}`,children:[a.jsx("button",{onClick:handlePrevMonth,className:"p-1.5 active:bg-gray-100 rounded-lg",style:{WebkitTapHighlightColor:"transparent"},children:a.jsx(s.Z,{size:18,className:"text-gray-600"})}),a.jsx("div",{className:"text-base font-semibold text-gray-900",children:(0,d.ZP)(w,"MMMM yyyy")}),a.jsx("button",{onClick:handleNextMonth,className:"p-1.5 active:bg-gray-100 rounded-lg",style:{WebkitTapHighlightColor:"transparent"},children:a.jsx(n.Z,{size:18,className:"text-gray-600"})})]}),(0,a.jsxs)("div",{className:f?"p-2":"p-3",children:[a.jsx("div",{className:`grid grid-cols-7 ${f?"gap-0.5 mb-1":"gap-1 mb-1.5"}`,children:D.map(e=>a.jsx("div",{className:`text-center ${f?"text-[10px] py-1":"text-xs py-1.5"} font-medium text-gray-500`,children:e},e))}),a.jsx("div",{className:`grid grid-cols-7 ${f?"gap-0.5":"gap-1"}`,children:T.map((t,r)=>{if(!t)return a.jsx("div",{className:"aspect-square"},`empty-${r}`);let i=e&&(0,x.Z)(t,v),l=(0,x.Z)(t,new Date),s=(0,m.Z)(t,w);return a.jsx("button",{onClick:()=>handleDateSelect(t),className:`aspect-square ${f?"rounded-md text-[11px]":"rounded-lg text-xs"} font-medium transition-all duration-100 ${i?"bg-primary-600 text-white shadow-lg scale-110":l?"bg-primary-100 text-primary-700 border-2 border-primary-500 active:scale-[0.95]":s?"bg-white text-gray-900 active:bg-gray-100 active:scale-[0.95]":"bg-gray-50 text-gray-400"}`,style:{WebkitTapHighlightColor:"transparent"},children:(0,d.ZP)(t,"d")},t.toISOString())})})]}),a.jsx("div",{className:f?"p-2 border-t border-gray-200":"p-3 border-t border-gray-200",children:(0,a.jsxs)("button",{onClick:handleToday,className:f?"w-full h-9 bg-primary-600 text-white rounded-lg font-semibold active:bg-primary-700 active:scale-[0.97] transition-transform duration-100 flex items-center justify-center gap-2 shadow-lg shadow-primary-600/30 text-xs":"w-full h-10 bg-primary-600 text-white rounded-lg font-semibold active:bg-primary-700 active:scale-[0.97] transition-transform duration-100 flex items-center justify-center gap-2 shadow-lg shadow-primary-600/30 text-sm",style:{WebkitTapHighlightColor:"transparent"},children:[a.jsx(o.Z,{size:f?14:16}),"Select Today"]})})]});return f?renderContent():a.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100000] flex items-end justify-center backdrop-blur-sm",onClick:e=>{e.target===e.currentTarget&&r()},children:renderContent()})}},32737:(e,t,r)=>{r.d(t,{Z:()=>NumberPad});var a=r(30784),i=r(9885),l=r(56206),s=r(71063),n=r(16403),o=r(81766);function NumberPad({value:e,onChange:t,onClose:r,label:d="Enter Amount",maxDecimals:c=2,allowNegative:h=!1,inline:g=!1,hideDoneButton:m=!1,showCurrency:x=!1}){let getInitialValue=()=>{if(0===e||"0"===e||""===e||!e)return"0";let t=e.toString();return t.includes(".")?t.replace(/\.?0+$/,"")||"0":t},[u,y]=(0,i.useState)(getInitialValue()),[b,p]=(0,i.useState)(getInitialValue().includes("."));(0,i.useEffect)(()=>{let t=(()=>{if(0===e||"0"===e||""===e||!e)return"0";let t=e.toString();return t.includes(".")?t.replace(/\.?0+$/,"")||"0":t})();y(t),p(t.includes("."))},[e]);let handleNumberPress=e=>{let r=u;if("."===e){if(b)return;r="0"===u?"0.":u+".",p(!0)}else if(r="0"===u&&"."!==e?e:u+e,b){let e=r.split(".");if(e[1]&&e[1].length>c)return}y(r);let a=parseFloat(r)||0;t(a)},handleBackspace=()=>{if(u.length>1){let e=u.slice(0,-1);e.endsWith(".")?(p(!1),y(e.slice(0,-1)),t(parseFloat(e.slice(0,-1))||0)):(y(e),t(parseFloat(e)||0))}else y("0"),p(!1),t(0)},handleClear=()=>{y("0"),p(!1),t(0)},handleToggleNegative=()=>{if(h){let e=u.startsWith("-")?u.slice(1):"-"+u;y(e),t(parseFloat(e)||0)}},handleDone=()=>{let e=parseFloat(u)||0;t(e),setTimeout(()=>{r()},50)},renderContent=()=>(0,a.jsxs)("div",{className:g?"w-full":"bg-white rounded-t-3xl w-full max-w-md animate-slide-up shadow-2xl",onClick:e=>e.stopPropagation(),style:{WebkitTapHighlightColor:"transparent"},children:[!g&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d}),a.jsx("button",{onClick:r,className:"p-2 active:bg-gray-100 rounded-lg",style:{WebkitTapHighlightColor:"transparent"},children:a.jsx(l.Z,{size:20,className:"text-gray-500"})})]}),a.jsx("div",{className:g?"p-4 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl mb-3":"p-6 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl mb-2",children:a.jsx("div",{className:"text-right",children:x&&parseFloat(u)>0?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:g?"text-xs text-gray-500 mb-1":"text-sm text-gray-500 mb-1",children:d}),a.jsx("div",{className:g?"text-2xl font-bold text-primary-600":"text-3xl font-bold text-primary-600",children:(0,o.formatIndianCurrency)(parseFloat(u)||0)}),a.jsx("div",{className:g?"text-sm text-gray-400 mt-1 font-mono":"text-base text-gray-400 mt-1 font-mono",children:u||"0"})]}):a.jsx("div",{className:g?"text-3xl font-bold text-gray-900 font-mono tracking-tight":"text-4xl font-bold text-gray-900 font-mono tracking-tight",children:u||"0"})})}),a.jsx("div",{className:g?"p-2":"p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2.5",children:[a.jsx("button",{onClick:()=>handleNumberPress("7"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"7"}),a.jsx("button",{onClick:()=>handleNumberPress("8"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"8"}),a.jsx("button",{onClick:()=>handleNumberPress("9"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"9"}),a.jsx("button",{onClick:()=>handleNumberPress("4"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"4"}),a.jsx("button",{onClick:()=>handleNumberPress("5"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"5"}),a.jsx("button",{onClick:()=>handleNumberPress("6"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"6"}),a.jsx("button",{onClick:()=>handleNumberPress("1"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"1"}),a.jsx("button",{onClick:()=>handleNumberPress("2"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"2"}),a.jsx("button",{onClick:()=>handleNumberPress("3"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"3"}),h?a.jsx("button",{onClick:handleToggleNegative,className:"h-16 bg-gray-50 border-2 border-gray-200 rounded-2xl text-xl font-bold text-gray-700 active:bg-gray-100 active:scale-[0.95] transition-all duration-150 shadow-sm touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"\xb1"}):a.jsx("button",{onClick:handleClear,className:"h-16 bg-gray-50 border-2 border-gray-200 rounded-2xl flex items-center justify-center active:bg-gray-100 active:scale-[0.95] transition-all duration-150 shadow-sm touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:a.jsx(s.Z,{size:22,className:"text-gray-700"})}),a.jsx("button",{onClick:()=>handleNumberPress("0"),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"0"}),a.jsx("button",{onClick:()=>handleNumberPress("."),className:"h-16 bg-white border-2 border-gray-200 rounded-2xl text-2xl font-bold text-gray-900 active:bg-gray-50 active:scale-[0.95] active:border-primary-300 transition-all duration-150 shadow-sm hover:shadow-md touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"."}),a.jsx("button",{onClick:handleBackspace,className:"h-16 bg-gradient-to-br from-gray-100 to-gray-200 border-2 border-gray-300 rounded-2xl flex items-center justify-center active:from-gray-200 active:to-gray-300 active:scale-[0.95] transition-all duration-150 shadow-sm touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:a.jsx(n.Z,{size:22,className:"text-gray-700"})}),!m&&a.jsx("button",{onClick:handleDone,className:g?"h-14 bg-gradient-to-br from-primary-600 to-primary-700 text-white rounded-xl text-base font-bold active:from-primary-700 active:to-primary-800 active:scale-[0.97] transition-all duration-150 col-span-2 shadow-lg shadow-primary-600/40 touch-manipulation":"h-16 bg-gradient-to-br from-primary-600 to-primary-700 text-white rounded-2xl text-lg font-bold active:from-primary-700 active:to-primary-800 active:scale-[0.97] transition-all duration-150 col-span-2 shadow-lg shadow-primary-600/40 touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:"Done"}),m&&a.jsx("div",{className:"col-span-2"})]})})]});return g?renderContent():a.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100000] flex items-end justify-center backdrop-blur-sm",onClick:e=>{e.target===e.currentTarget&&r()},children:renderContent()})}},89342:(e,t,r)=>{r.d(t,{Z:()=>SelectList});var a=r(30784),i=r(56206),l=r(69518),s=r(22385),n=r(9885);function SelectList({options:e,value:t,onChange:r,onClose:o,label:d="Select Option",allowCustom:c=!1,onCustomAdd:h,multiSelect:g=!1,selectedValues:m=[],onMultiChange:x,inline:u=!1,autoFocusSearch:y=!0}){let[b,p]=(0,n.useState)(""),[f,v]=(0,n.useState)(!1),[w,j]=(0,n.useState)(""),N=e.filter(e=>e.toLowerCase().includes(b.toLowerCase())),handleSelect=e=>{if(g&&x){let t=m.includes(e)?m.filter(t=>t!==e):[...m,e];x(t)}else r(e),o()},handleCustomAdd=()=>{w.trim()&&h&&(h(w.trim()),r(w.trim()),u||o(),j(""),v(!1))},renderContent=()=>(0,a.jsxs)("div",{className:u?"w-full flex flex-col":"bg-white rounded-t-3xl w-full max-w-md max-h-[80vh] flex flex-col animate-slide-up shadow-2xl",style:{WebkitTapHighlightColor:"transparent",...u?{maxHeight:"60vh"}:{}},onClick:e=>e.stopPropagation(),children:[!u&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d}),a.jsx("button",{onClick:o,className:"p-2 active:bg-gray-100 rounded-lg",style:{WebkitTapHighlightColor:"transparent"},children:a.jsx(i.Z,{size:20,className:"text-gray-500"})})]}),!f&&(0,a.jsxs)("div",{className:`${u?"p-2":"p-4"} flex-shrink-0 ${u?"":"border-b border-gray-200"}`,children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(l.Z,{size:u?16:18,className:`absolute ${u?"left-2":"left-3"} top-1/2 -translate-y-1/2 text-gray-400`}),a.jsx("input",{type:"text",value:b,onChange:e=>p(e.target.value),placeholder:"Search...",className:`w-full ${u?"pl-8 pr-3 py-2":"pl-10 pr-4 py-2.5"} bg-gray-50 border border-gray-200 ${u?"rounded-lg":"rounded-xl"} focus:outline-none focus:ring-2 focus:ring-primary-500`,style:{fontSize:u?"14px":"16px"},autoFocus:y&&!u})]}),c&&u&&a.jsx("div",{className:"flex justify-end mt-2",children:a.jsx("button",{type:"button",onClick:()=>v(!0),className:"text-xs font-semibold text-primary-600 active:text-primary-700",style:{WebkitTapHighlightColor:"transparent"},children:"+ Add New"})})]}),f?(0,a.jsxs)("div",{className:`${u?"p-2":"p-4"} flex-1 flex flex-col`,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Enter New ",d]}),a.jsx("input",{type:"text",value:w,onChange:e=>j(e.target.value),placeholder:`Enter ${d.toLowerCase()}`,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500",style:{fontSize:"16px"},autoFocus:!0})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-auto",children:[a.jsx("button",{onClick:()=>{v(!1),j("")},className:"flex-1 h-12 bg-gray-100 text-gray-700 rounded-xl font-semibold active:bg-gray-200 transition-colors",style:{WebkitTapHighlightColor:"transparent"},children:"Cancel"}),a.jsx("button",{onClick:handleCustomAdd,disabled:!w.trim(),className:"flex-1 h-12 bg-primary-600 text-white rounded-xl font-semibold active:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{WebkitTapHighlightColor:"transparent"},children:"Add"})]})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"flex-1 overflow-y-auto",style:{minHeight:0},children:N.length>0?(0,a.jsxs)("div",{className:u?"p-1.5":"p-2",children:[!g&&t&&a.jsx("button",{onClick:()=>{r(""),u||o()},className:`w-full text-left ${u?"px-3 py-2 rounded-lg mb-0.5":"px-4 py-3 rounded-xl mb-1"} transition-all duration-100 bg-gray-50 border border-gray-300 text-gray-600 active:bg-gray-100 active:scale-[0.98]`,style:{WebkitTapHighlightColor:"transparent"},children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:u?"text-sm font-medium":"text-base font-medium",children:"Clear selection"}),a.jsx(i.Z,{size:u?16:18,className:"text-gray-400"})]})}),N.map(e=>{let r=g?m.includes(e):t===e;return a.jsx("button",{onClick:()=>handleSelect(e),className:`w-full text-left ${u?"px-3 py-2 rounded-lg mb-0.5":"px-4 py-3 rounded-xl mb-1"} transition-all duration-100 ${r?"bg-primary-50 border-2 border-primary-500 text-primary-700 shadow-sm":"bg-white border border-gray-200 text-gray-900 active:bg-gray-50 active:scale-[0.98]"}`,style:{WebkitTapHighlightColor:"transparent"},children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:u?"text-sm font-medium":"text-base font-medium",children:e}),r&&a.jsx("div",{className:`${u?"w-4 h-4":"w-5 h-5"} bg-primary-600 rounded-full flex items-center justify-center`,children:a.jsx("span",{className:"text-white text-xs",children:"✓"})})]})},e)})]}):a.jsx("div",{className:"p-8 text-center text-gray-500",children:"No options found"})}),c&&!f&&!u&&a.jsx("div",{className:"p-4 border-t border-gray-200 flex-shrink-0 bg-white",children:(0,a.jsxs)("button",{onClick:()=>v(!0),className:"w-full h-12 bg-gray-100 border border-gray-200 rounded-xl font-semibold text-gray-700 active:bg-gray-200 transition-colors flex items-center justify-center gap-2",style:{WebkitTapHighlightColor:"transparent"},children:[a.jsx(s.Z,{size:18}),"Add New"]})}),g&&a.jsx("div",{className:"p-4 border-t border-gray-200 flex-shrink-0",children:(0,a.jsxs)("button",{onClick:o,disabled:0===m.length,className:"w-full h-12 bg-primary-600 text-white rounded-xl font-semibold active:bg-primary-700 active:scale-[0.97] transition-transform duration-100 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-primary-600/30",style:{WebkitTapHighlightColor:"transparent"},children:["Done ",m.length>0&&`(${m.length} selected)`]})})]})]});return u?renderContent():a.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100000] flex items-end justify-center backdrop-blur-sm",onClick:e=>{e.target===e.currentTarget&&o()},children:renderContent()})}},58683:(e,t,r)=>{r.d(t,{Z:()=>TruckLoading});var a=r(30784),i=r(52451),l=r.n(i),s=r(9885);function TruckLoading({size:e=200,className:t="",text:r,inline:i=!1}){let n="/truck-unloading.gif",[o,d]=(0,s.useState)(!1);return i?(0,a.jsxs)("div",{className:`flex items-center gap-2 ${t}`,children:[a.jsx("div",{style:{width:e,height:e,position:"relative"},children:o?a.jsx(TruckUnloadingAnimation,{size:e}):a.jsx(l(),{src:n,alt:"Loading...",fill:!0,sizes:`${e}px`,style:{objectFit:"contain"},onError:()=>d(!0)})}),r&&a.jsx("span",{className:"text-sm text-gray-500",children:r})]}):(0,a.jsxs)("div",{className:`flex flex-col items-center justify-center gap-3 ${t}`,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[a.jsx("div",{style:{width:e,height:e,position:"relative",maxWidth:"100%",display:"block",margin:"0 auto"},children:o?a.jsx(TruckUnloadingAnimation,{size:e}):a.jsx(l(),{src:n,alt:"Loading materials...",fill:!0,sizes:`${e}px`,style:{objectFit:"contain"},onError:()=>d(!0)})}),r&&a.jsx("p",{className:"text-sm text-gray-500",children:r})]})}function TruckUnloadingAnimation({size:e}){let t=`truckGrad-${Math.random().toString(36).substr(2,9)}`;return(0,a.jsxs)("svg",{width:e,height:e,viewBox:"0 0 200 150",preserveAspectRatio:"xMidYMid meet",style:{display:"block",width:"100%",height:"100%",overflow:"hidden"},children:[a.jsx("defs",{children:(0,a.jsxs)("linearGradient",{id:t,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[a.jsx("stop",{offset:"0%",style:{stopColor:"#2e31fb",stopOpacity:1}}),a.jsx("stop",{offset:"100%",style:{stopColor:"#1e21d9",stopOpacity:1}})]})}),a.jsx("line",{x1:"0",y1:"130",x2:"200",y2:"130",stroke:"#666",strokeWidth:"2"}),a.jsx("rect",{x:"20",y:"80",width:"80",height:"40",fill:`url(#${t})`,rx:"4",className:"truck-animate"}),a.jsx("rect",{x:"100",y:"70",width:"50",height:"50",fill:`url(#${t})`,rx:"4",className:"truck-animate"}),a.jsx("rect",{x:"105",y:"75",width:"20",height:"15",fill:"#87CEEB",rx:"2",className:"truck-animate"}),(0,a.jsxs)("g",{className:"truck-animate",children:[(0,a.jsxs)("g",{transform:"translate(45, 125)",children:[a.jsx("circle",{r:"12",fill:"#333",className:"wheel-animate",style:{transformOrigin:"0 0"}}),a.jsx("circle",{r:"8",fill:"#666"})]}),(0,a.jsxs)("g",{transform:"translate(75, 125)",children:[a.jsx("circle",{r:"12",fill:"#333",className:"wheel-animate",style:{transformOrigin:"0 0"}}),a.jsx("circle",{r:"8",fill:"#666"})]})]}),a.jsx("rect",{x:"150",y:"90",width:"40",height:"30",fill:"#888",rx:"3",className:"trolley-animate"}),(0,a.jsxs)("g",{className:"trolley-animate",children:[a.jsx("g",{transform:"translate(160, 125)",children:a.jsx("circle",{r:"6",fill:"#333",className:"wheel-animate-fast",style:{transformOrigin:"0 0"}})}),a.jsx("g",{transform:"translate(180, 125)",children:a.jsx("circle",{r:"6",fill:"#333",className:"wheel-animate-fast",style:{transformOrigin:"0 0"}})})]}),a.jsx("line",{x1:"100",y1:"100",x2:"150",y2:"105",stroke:"#555",strokeWidth:"3",className:"arm-animate"})]})}},39431:(e,t,r)=>{r.d(t,{z:()=>o});var a=r(29904),i=r(60755),l=r(59233),s=r(93188);let n="invoices",generateInvoiceNumber=()=>{let e=new Date,t=(0,s.ZP)(e,"yyMMddHHmm");return`ROYAL${t}`},o={async createInvoice(e){let t=(0,i.z)();if(!t)throw Error("Firebase db is not initialized. Check your Firebase configuration and .env.local file.");try{let r=[];for(let t of e){let e=await l.XK.getOrderById(t);e&&r.push(e)}if(0===r.length)throw Error("No valid orders found");let i=r.reduce((e,t)=>e+t.total,0),s=r[0].partyName,o=r[0].siteName,d=new Date().toISOString(),c=new Date(Date.now()+6048e5).toISOString(),h={invoiceNumber:generateInvoiceNumber(),orderIds:e,totalAmount:i,paidAmount:0,partialPayments:[],createdAt:d,dueDate:c,paid:!1,overdue:!1,partyName:s,siteName:o,archived:!1},g=await (0,a.ET)((0,a.hJ)(t,n),h);for(let t of e){let e=await l.XK.getOrderById(t);e&&await l.XK.updateOrder(t,{invoiced:!0,invoiceId:g.id})}return console.log("✅ Invoice created successfully with ID:",g.id),g.id}catch(e){throw console.error("❌ Firestore error creating invoice:",e),Error(`Failed to create invoice: ${e.message||"Unknown error"}`)}},async getAllInvoices(e){let t=(0,i.z)();if(!t)return console.warn("Firebase is not configured. Returning empty array."),[];let r=(0,a.IO)((0,a.hJ)(t,n),(0,a.Xo)("createdAt","desc"));e&&(e.partyName&&(r=(0,a.IO)(r,(0,a.ar)("partyName","==",e.partyName))),void 0!==e.paid&&(r=(0,a.IO)(r,(0,a.ar)("paid","==",e.paid))));let l=await (0,a.PL)(r),s=[];l.forEach(e=>{let t=e.data(),r={id:e.id,...t};if(r.paid)r.overdue=!1;else{let e=new Date(r.dueDate),t=new Date;r.overdue=t>e}s.push(r)});let o=s;return(e?.startDate||e?.endDate)&&(o=s.filter(t=>{let r=new Date(t.createdAt);return!(e.startDate&&r<new Date(e.startDate)||e.endDate&&r>new Date(e.endDate))})),e?.overdue!==void 0&&(o=o.filter(t=>t.overdue===e.overdue)),o},async getInvoiceById(e){let t=await this.getAllInvoices();return t.find(t=>t.id===e)||null},async addPayment(e,t,r){let l=(0,i.z)();if(!l)throw Error("Firebase is not configured.");let s=await this.getInvoiceById(e);if(!s)throw Error("Invoice not found");let o=s.paidAmount||0,d=o+t,c=d>=s.totalAmount,h=new Date().toISOString(),g={id:Date.now().toString()+Math.random().toString(36).substr(2,9),amount:t,date:h,createdAt:h};r&&r.trim()&&(g.note=r.trim());let m=[...s.partialPayments||[],g];try{let t=(0,a.JU)(l,n,e);await (0,a.r7)(t,{paidAmount:d,partialPayments:m,paid:c,overdue:!1,updatedAt:new Date().toISOString()}),c&&!s.archived&&await this.archiveOrders(e),console.log("✅ Payment added successfully")}catch(e){throw console.error("Error adding payment:",e),Error(`Failed to add payment: ${e.message||"Unknown error"}`)}},async removePayment(e,t){let r=(0,i.z)();if(!r)throw Error("Firebase is not configured.");let l=await this.getInvoiceById(e);if(!l)throw Error("Invoice not found");let s=l.partialPayments||[],o=s.find(e=>e.id===t);if(!o)throw Error("Payment record not found");let d=s.filter(e=>e.id!==t),c=d.reduce((e,t)=>e+t.amount,0),h=c>=l.totalAmount;try{let t=(0,a.JU)(r,n,e);await (0,a.r7)(t,{paidAmount:c,partialPayments:d.length>0?d:(0,a.AK)(),paid:h,updatedAt:new Date().toISOString()}),!h&&l.archived&&await this.unarchiveOrders(e),console.log("✅ Payment removed successfully")}catch(e){throw console.error("Error removing payment:",e),Error(`Failed to remove payment: ${e.message||"Unknown error"}`)}},async archiveOrders(e){let t=await this.getInvoiceById(e);if(!t)throw Error("Invoice not found");try{for(let e of t.orderIds)await l.XK.updateOrder(e,{archived:!0});let r=(0,i.z)();if(r){let t=(0,a.JU)(r,n,e);await (0,a.r7)(t,{archived:!0,updatedAt:new Date().toISOString()})}console.log("✅ Orders archived successfully")}catch(e){throw console.error("Error archiving orders:",e),Error(`Failed to archive orders: ${e.message||"Unknown error"}`)}},async unarchiveOrders(e){let t=await this.getInvoiceById(e);if(!t)throw Error("Invoice not found");try{for(let e of t.orderIds)await l.XK.updateOrder(e,{archived:!1});let r=(0,i.z)();if(r){let t=(0,a.JU)(r,n,e);await (0,a.r7)(t,{archived:!1,updatedAt:new Date().toISOString()})}console.log("✅ Orders unarchived successfully")}catch(e){throw console.error("Error unarchiving orders:",e),Error(`Failed to unarchive orders: ${e.message||"Unknown error"}`)}},async deleteInvoice(e){let t=(0,i.z)();if(!t)throw Error("Firebase is not configured.");try{let r=await this.getInvoiceById(e);if(r)for(let e of r.orderIds){let r=(0,a.JU)(t,"orders",e);await (0,a.r7)(r,{invoiced:!1,invoiceId:(0,a.AK)(),updatedAt:new Date().toISOString()})}await (0,a.oe)((0,a.JU)(t,n,e)),console.log("✅ Invoice deleted successfully")}catch(e){throw console.error("Error deleting invoice:",e),Error(`Failed to delete invoice: ${e.message||"Unknown error"}`)}},async getUniquePartyNames(){let e=(0,i.z)();if(!e)return[];try{let t=(0,a.IO)((0,a.hJ)(e,n)),r=await (0,a.PL)(t),i=new Set;return r.forEach(e=>{let t=e.data();t.partyName&&"string"==typeof t.partyName&&i.add(t.partyName.trim())}),Array.from(i).sort()}catch(e){return console.error("Error fetching party names:",e),[]}}}}};